(function(h){var p=window.AmazonUIPageJS||window.P,t=p._namespace||p.attributeErrors,a=t?t("AskAuiAssets"):p;a.guardFatal?a.guardFatal(h)(a,window):a.execute(function(){h(a,window)})})(function(h,p,t){h.when("jQuery","ready").execute(function(a){a("body").delegate(".askInlineWidget .cdShowLess, .askInlineWidget .cdReadMore","click touchstart",function(b){b.preventDefault();a(b.target).parents(".cdJSEnabledText").toggleClass("askShowMore")})});h.when("jQuery","load").execute(function(a){var b=a(".askSubHeader");
0<b.length&&!p.pageYOffset&&a("html, body").animate({scrollTop:b.offset().top},0)});h.when("jQuery","ready").execute(function(a){function b(){return a(p).scrollTop()+5>=a(document).height()-a(p).height()}function e(){b()&&g()}function d(){a("body").hasClass("allAnswersScrolling")?a(document).scroll(e):(a(".loadMoreAnswersMobile").show(),a(".loadMoreAnswersMobile").bind("touchstart click",g))}function g(){var k=a(".answersLoadingSpinner"),n=a(".loadMoreAnswersMobile"),m=a.trim(a(".askPage input[name=askQuestion]").val()),
q=a.trim(a(".askPage input[name=askSort]").val()),h=a(".askPage input[name=askLanguage]").val(),p=a(".askPage input[name=askAsin]").val(),m="/ask/answers/inline/"+m+"/"+l+"?pageSize=6&sort="+q+"&language="+h;p!==t&&(m+="&asin="+p);k.show();n.hide();a(".askMobileFailedToFetchMoreAnswers").hide();a(document).unbind("scroll",e);n.unbind("touchstart click",g);a.ajax({url:m,data:{},dataType:"html",cache:!1,timeout:2E3,success:function(e){k.hide();a(".askPage .answerBox").append(e);f&&(b()?g():f=!1);"true"===
a.trim(a("input[name=moreAnswersAfterPage"+l+"]").val())?d():a(".loadMoreAnswersMobile").hide();a(document).trigger("ajax:success");l+=1},error:function(){k.hide();a(".askMobileFailedToFetchMoreAnswers").show();d()}})}var f=!0,l=3;a("body").hasClass("allAnswersScrolling")&&(b()?g():f=!1,a(document).scroll(e));a(".loadMoreAnswersMobile").bind("touchstart click",g)});h.when("jQuery","ready").execute(function(a){var b=!0;a("body").delegate(".askQuestionForm","submit",function(d){d=a(d.currentTarget);
var g=d.find("[name='askQuestionText']"),f=g.val(),g=g.attr("placeholder");if("undefined"===typeof f||f.match(/^\s*$/)||f===g)return d.attr("class","askQuestionForm hasEmptyQuestion"),!1;if(b)return b=!1,g=e,f=0<=f.indexOf("?"),g(d,f),!1;d.attr("class","askQuestionForm");return!0});var e=function(a,b){b?a.trigger("submit"):a.attr("class","askQuestionForm hasBadQuestion")}});h.when("jQuery","ready").register("askPostQuestionValidation",function(a){function b(b){var l=a(b.currentTarget),m=g.val(),q=
g.attr("placeholder");a(".askError").hide();return"undefined"===typeof m||m.match(/^\s*$/)||m===q?(f.show(),b.stopImmediatePropagation(),!1):d?(d=!1,q=e,m=0<=m.indexOf("?"),q(l,m),b.stopImmediatePropagation(),!1):!0}function e(a,b){b?a.trigger("submit"):l.show()}var d=!0,g,f=a(".askEmptyQuestionError"),l=a(".askBadQuestionError");return{setup:function(a,d,e){g=e;a.delegate(d,"submit",b)}}});h.when("jQuery","askHuddlesControl","ready").execute(function(a,b){function e(d){var e="/ask/questions/inline/"+
a.trim(a(".askWidgetQuestions input.askAsin").val())+"/"+d;a.ajax({url:e,data:{},dataType:"html",cache:!1,timeout:5E3,success:function(e){a(".askInlineWidget .askFailedToFetchMoreQuestions").hide();a(".askInlineWidget .askLoadMoreQuestions").hide();a(".askInlineWidget .askMoreQandAResults").append(e);a(".askInlineWidget .askTopQandALoadMoreQuestions").hide();e=d+1;a(".askWidgetQuestions input.nextPage").val(e);e=document.getElementById("askInlineQuestionsPage-"+d);var g;if(g="undefined"!==typeof e&&
null!==e)g=e.getBoundingClientRect(),g=!(0<=g.top&&0<=g.left&&g.bottom<=(p.innerHeight||a(p).height())&&g.right<=(p.innerWidth||a(p).width()));if(g){g=0;do g+=e.offsetTop||0,e=e.offsetParent;while(e);e=g;a("html, body").animate({scrollTop:e},"slow")}b.initializeHuddlesLinks(a(".askInlineWidget .askMoreQandAResults"),"dp")},error:function(){a(".askInlineWidget .askFailedToFetchMoreQuestions").show()}})}a("body").delegate(".askInlineWidget .askSeeMoreQuestionsLink","click",function(a){e(2);a.preventDefault()});
a("body").delegate(".askInlineWidget .askLoadMoreQuestionsLink","click",function(b){var g=parseInt(a(".askWidgetQuestions input.nextPage").val(),10)||0;0<g&&(e(g),b.preventDefault())})});h.when("jQuery","ready").execute(function(a){function b(b){b=document.getElementById(b);var d;if(d="undefined"!==typeof b&&null!==b)d=b.getBoundingClientRect(),d=!(0<=d.top&&0<=d.left&&d.bottom<=(p.innerHeight||a(p).height())&&d.right<=(p.innerWidth||a(p).width()));if(d){d=0;do d+=b.offsetTop||0,b=b.offsetParent;
while(b);b=d;a("html, body").animate({scrollTop:b},"slow")}}function e(){var b=a(".askQuestionForm input.askAsin").val();return b&&0!==b.length?"?asin="+b:""}function d(d,f){if(d){var n=e();a.ajax({url:"/ask/answers/inline/"+d+"/"+f+n,data:{},dataType:"html",cache:!1,timeout:5E3,success:function(e){a(".askInlineWidget #failed-to-fetch-answers-"+d).hide();a(".askInlineWidget #askSeeAllAnswersLink-"+d).hide();a(".askInlineWidget .askCollapseAnswers-"+d).show();a(".askInlineWidget .askLoadMoreAnswersLink-"+
d).hide();a(".askInlineWidget #"+d).show();a(".askInlineWidget #"+d).append(e);g(d,f);b("askInlineAnswersPage-"+d+"-"+f)},error:function(){a(".askInlineWidget #failed-to-fetch-answers-"+d).show()}})}}function g(b,d){a(".askWidgetQuestions input.currentAnswersPage-"+b).val(d)}function f(d){b("question-"+d);setTimeout(function(){a(".askInlineWidget #"+d).empty();a(".askInlineWidget .askCollapseAnswers-"+d).hide();a(".askInlineWidget #failed-to-fetch-answers-"+d).hide();a(".askInlineWidget #askSeeAllAnswersLink-"+
d).show()},500);g(d,1)}a("body").delegate(".askInlineWidget .askWidgetSeeAllAnswersInline","click",function(b){var e=a(b.currentTarget).attr("data-questionId");d(e,1);b.preventDefault()});a("body").delegate(".askInlineWidget .askWidgetLoadMoreAnswersInline","click",function(b){var e=a(b.currentTarget).attr("data-questionId"),f=parseInt(a(".askWidgetQuestions input.currentAnswersPage-"+e).val(),10)||0;0<f&&(d(e,f+1),b.preventDefault())});a("body").delegate("input[name='collapse-to-most-helpful-answer']",
"click",function(b){b=a(b.currentTarget).attr("data-questionId");f(b)})});h.when("jQuery","ready").register("askAuthenticatedAjax",function(a){return{handler:function(b,e){var d=a(b.currentTarget),g=d.attr("action"),f=d.attr("method"),l=d.serializeArray(),k=d.attr("type"),g={url:g,type:f,data:l,dataType:k,timeout:e,beforeSend:function(b,e){e.dataType===t&&b.setRequestHeader("Accept","*/*;q=0.5, "+e.accepts.script);b.setRequestHeader("X-Requested-With","XMLHttpRequest");var f=a.Event("ajax:beforeSend");
d.trigger(f,[b,e]);if(!1!==f.result)d.trigger("ajax:send",b);else return!1},success:function(a,b,e){d.trigger("ajax:success",[a,b,e])},complete:function(a,b){d.trigger("ajax:complete",[a,b])},error:function(a,b,e){d.trigger("ajax:error",[a,b,e])}};if(!("withCredentials"in new XMLHttpRequest))return!0;g.xhrFields={withCredentials:!0};b.preventDefault();a.ajax(g)}}});h.when("jQuery","askAbstractLiveSearch","ready").register("askLiveSearch",function(a,b){return{setup:function(a,d,g){b.setup(a,d,g,"/ask/livesearch/search")}}});
h.when("askAbstractLiveSearch","ready").register("askDetailPageSearchLiveSearch",function(a){return{setup:function(b,e,d){a.setup(b,e,d,"/ask/livesearch/detailPageSearch/search")}}});h.when("jQuery","ready").register("askAbstractLiveSearch",function(a){function b(a){return"function"!==typeof a?function(){}:a}var e=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}();return{setup:function(d,
g,f,l){function k(c){A();clearTimeout(m);h=a.ajax(l,{type:"GET",data:{query:c,asin:y,forumId:z,liveSearchSessionId:r,liveSearchPageLoadId:p,searchSource:t,language:G}}).done(C).fail(B);q=c}var h,m,q,r=null,p=null,t=null,w=d.find(g),u=w.closest("form"),v=d.find(".askLiveSearchSessionId"),D=u.children("input[name=searchSource]"),y=a.trim(u.children("input.askAsin").val()),z=a.trim(u.children("input.askForumId").val()),G=a.trim(u.children("input[name=language]").val()),t=a.trim(u.children("input[name=searchSource]").val()),
A=b(f.liveSearchStartCallback),C=b(f.liveSearchDoneCallback),c=b(f.liveSearchClearCallback),B=b(f.liveSearchFailCallback);d.undelegate(".livesearch").delegate(g,"keyup.livesearch input.livesearch",function(){var b=w.val(),d=a.trim(b);clearTimeout(m);if(d!==q){null===r&&(r=e(),v.val(r));p=a(".askLiveSearchPageLoadId").val();if(null===p||""===p)p=e(),a(".askLiveSearchPageLoadId").val(p);t=a.trim(D.val());0===d.length?(c(),h&&h.abort(),r=q=null):b.match(/\w\W+$/)?k(d):m=setTimeout(function(){k(d)},500)}})}}});
h.when("A","ready").register("askAbstractDetailPageSearchPostQuestion",function(a){function b(b,d,e){a.get("/gp/customer-forum/dynamic-update/validate-post.html",{contentType:"json",params:{body:b,checkIsQuestion:1},success:function(a){a.hasError||a.content.isQuestion?d():e()},error:function(){d()}})}var e=a.$,d={postQuestionTextInputSelector:"input",callbacks:{goodQuestion:function(){},badQuestion:function(){},emptyQuestion:function(){}}};return{setup:function(g,f){function l(){k.callbacks.badQuestion();
h=!0}var k=e.extend(!0,{},d,f),h=!1;a.declarative(g,"click",function(){var a=e(k.postQuestionTextInputSelector).val();"undefined"===typeof a||a.match(/^\s*$/)?k.callbacks.emptyQuestion():h?k.callbacks.goodQuestion():-1===a.indexOf("?")?l():b(a,k.callbacks.goodQuestion,l)})}}});h.when("A","a-alert","ready").register("askAnswerSolicitationDeleteAnswer",function(a,b){function e(b){return a.$("#askDeleteAnswerSection-"+b.data.answerId)}return{setup:function(d){var g=a.$("#askPostAnswerFormSection-"+d),
f=a.$("#askPostAnswerForm-"+d),l=a.$("#askPostAnswerResponse-"+d);a.declarative("ask-show-delete-answer-section","click",function(a){e(a).show()});a.declarative("ask-hide-delete-answer-section","click",function(a){e(a).hide()});a.declarative("ask-submit-delete-answer-form","click",function(d){d=d.data.answerId;var e=a.$("#askDeleteAnswerForm-"+d),m=a.$("#askAnswerContentSection-"+d),h=a.$("#askUpdateAnswerSection-"+d),r=b("#askDeleteAnswerError-"+d);r.hide();h.hide();a.post(e.attr("action"),{withCredentials:!0,
params:e.serializeArray(),indicator:a.$("#askDeleteAnswerSpinner-"+d),success:function(a,b,d){l.hide();m.hide();g.show();f.show()},error:function(a){r.html(a.http.responseText).show();h.show()}})})}}});h.when("jQuery","ready").register("askExpander",function(a){return{setup:function(b){b.delegate(".askExpanderContainer .askSeeMore","click",function(b){a(b.currentTarget).closest(".askExpanderContainer").addClass("askExpanderExpanded");b.preventDefault()});b.delegate(".askExpanderContainer .askSeeLess",
"click",function(b){a(b.currentTarget).parents(".askExpanderContainer").removeClass("askExpanderExpanded");b.preventDefault()})}}});h.when("A").register("askPreventEnterKey",function(a){a.declarative("ask-prevent-enter-key","keypress",function(a){13===a.$event.which&&a.$event.preventDefault()})});h.when("A","askUtils","ready").register("askPreventDoubleSubmit",function(a,b){return{idempotentSetup:b.makeIdempotent(function(){var b=!1;a.declarative("ask-prevent-double-submit","submit",function(a){b&&
a.$event.preventDefault();b=!0})})}});h.when("A","ready").register("askHuddlesControl",function(a){return{initializeHuddlesLinks:function(b,e){var d={};b.find(".askHuddlesUninitializedLink").each(function(b){b=a.$(this);var e=b.data("questionId");d[e]=b});var g=a.$.map(d,function(a,b){return b});0!==g.length&&a.$.ajax({url:"/ask/conversations/data",data:{questionId:g,sourcePage:e},timeout:5E3,traditional:!0,success:function(e){if(e=a.$.parseJSON(e))a.$.each(e,function(b,e){if(e.questionId&&d[e.questionId]){var f=
d[e.questionId];e.url&&(f.find("a").attr("href",e.url),f.removeClass("askHuddlesUninitializedLink"),e.chatboxParams&&a.declarative.create(f.find("a"),"render-huddles-chat",e.chatboxParams))}}),b.find(".askHuddlesUninitializedLink").remove()},complete:function(){a.trigger("ask:huddles-data:complete")}})},initializeChatbox:function(){h.when("A","huddles-chatbox").execute(function(a,e){a.declarative("render-huddles-chat","click",function(d){e.renderHuddleChat(a.$.extend({},d.data,{showEmbedded:!1}));
d.$event.preventDefault()})})}}});h.register("askCsmCounter",function(){function a(a){if("undefined"!==typeof a){var e=p.ue;if(e&&e.count){var d=e.count(a)||0;e.count(a,d+1)}}}return{logCounterMetric:a,createRateLimitedCsmLogHandler:function(b){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1},300),a(b))}}}});h.when("A","jQuery","ready").register("askPrefetchDetailPageSearchData",function(a,b){return{setup:function(){var b=!1;a.declarative("ask-detail-page-search-prefetch-click","click touchstart",
function(d){!1===b&&a.post("/ask/livesearch/detailPageSearch/search/prefetch/"+d.data.asin);b=!0})}}});h.when("A","ready").register("askUtils",function(a){var b=a.$,e=[];return{makeIdempotent:function(a){var b=!1;return function(){b||(a.apply(this,arguments),b=!0)}},makeRateLimited:function(a,e){var f=!1,l=b.extend(!0,{},{minPeriodInMilliseconds:2E3},e);return function(){f||a.apply(this,arguments);f=!0;setTimeout(function(){f=!1},l.minPeriodInMilliseconds)}},idempotentDeclarative:function(b,g,f){function l(b,
d,e){var f;a.declarative(b,d,function(a){f===t&&(f=a.type);a.type===f&&e(a)})}var k=b+g;e[k]||("click touchstart"===g||"touchstart click"===g?l(b,g,f):a.declarative(b,g,f),e[k]=!0)}}});h.when("A","askCsmCounter","askUtils","ready").register("askLogClickCsm",function(a,b,e){return{idempotentSetup:function(){e.idempotentDeclarative("ask-log-click-csm","click touchstart",function(a){b.logCounterMetric(a.data.metricName)})}}});h.when("A","askUtils","ready").register("askFollowupQuestions",function(a,
b){function e(a){var b=g(".askDPSearchTextInput input, input.askDPSearchTextInput");b.val("").trigger("input");var e=g(".askDPSearchForm [name=followupSearchSource]").val();d(e);a=g.trim(a.$currentTarget.text());b.val(a).trigger("input")}function d(a){var b=g(".askDPSearchForm"),d=b.siblings(".askPostQuestionForm");b.add(d).find("[name=searchSource]").val(a)}var g=a.$;return{idempotentSetup:function(){b.idempotentDeclarative("ask-click-followup-question","click",e)},resetSWDPSearchSource:function(){var a=
g(".askDPSearchForm [name=originalSearchSource]").val();d(a)}}});h.when("A","jQuery","askVoteControl","askExpander","askLiveSearch","askHuddlesControl","askCsmCounter","askPreventDoubleSubmit","ready").register("askDetailPageWidget",function(a,b,e,d,g,f,l,k){function h(a){a.delegate(".askInlineWidget .askLiveSearchEnabled","keypress",function(a){13===(a.keyCode||a.which)&&a.preventDefault()})}var m={liveSearchStartCallback:function(){b(".askLiveSearchLoading").show()},liveSearchDoneCallback:function(a){b(".askInlineWidget .askMoreQandAResults").empty();
b(".askWidgetQuestions input.nextPage").val(2);b(".askInlineWidget .askTopQandALoadMoreQuestions").hide();b(".askLiveSearchLoading").hide();b(".askLiveSearchResults").html(a);b(".askWidgetQuestions").attr("class","askWidgetQuestions askLiveSearchShow");b(".askInlineWidget .askQuestionExamples").hide();b(".askQuestionForm").attr("class","askQuestionForm");b(".askPostQuestionButtonContainer").show();b(".askLiveSearchSuccessfulMessage").show();b(".askLiveSearchFailureMessage").hide()},liveSearchClearCallback:function(){b(".askLiveSearchLoading").hide();
b(".askWidgetQuestions").attr("class","askWidgetQuestions askLiveSearchHide");b(".askInlineWidget .askTopQandALoadMoreQuestions, .askInlineWidget .askQuestionExamples").show();b(".askPostQuestionButtonContainer").hide()},liveSearchFailCallback:function(){b(".askLiveSearchLoading").hide();b(".askWidgetQuestions").attr("class","askWidgetQuestions askLiveSearchHide");b(".askInlineWidget .askTopQandALoadMoreQuestions, .askInlineWidget .askQuestionExamples").show();b(".askPostQuestionButtonContainer").show();
b(".askLiveSearchSuccessfulMessage").hide();b(".askLiveSearchFailureMessage").show()}};return{setup:function(){var q=b("#cf-ask-cel");k.idempotentSetup();e.setup(q);d.setup(q);h(q);g.setup(q,".askInlineWidget .askLiveSearchEnabled",m);f.initializeHuddlesLinks(q,"dp");(function(){var b=l.createRateLimitedCsmLogHandler("ask-btf-desktop-input-click");a.declarative("ask-btf-desktop-input-click","click touchstart",b);b=l.createRateLimitedCsmLogHandler("ask-btf-desktop-input-focusin");a.declarative("ask-btf-desktop-input-focusin",
"focusin",b);a.declarative("ask-btf-desktop-input-change","change",function(){l.logCounterMetric("ask-btf-desktop-input-change")});a.declarative("ask-btf-desktop-input-keyup","keyup",function(){l.logCounterMetric("ask-btf-desktop-input-keyup")})})()}}});h.when("jQuery","askVoteControl","askExpander","askHuddlesControl","askPreventDoubleSubmit","ready").register("askAllQuestionsPage",function(a,b,e,d,g){return{setup:function(){g.idempotentSetup();b.setup(a(".askTeaserQuestions"));e.setup(a(".askTeaserQuestions"));
d.initializeHuddlesLinks(a(".askTeaserQuestions"),"ql");d.initializeChatbox()}}});h.when("jQuery","askDesktopAnswerSolicitationPostAnswer","askAnswerSolicitationDeleteAnswer","askExpander","ready").register("askAnswerSolicitationLandingPage",function(a,b,e,d){return{setup:function(g){b.setup(g);e.setup(g);d.setup(a(".askTestQuestion"))}}});h.when("jQuery","askExpander","askHuddlesControl","ready").register("askDesktopAllAnswersPage",function(a,b,e){return{setup:function(){b.setup(a(".askAnswersAndComments"));
e.initializeChatbox()}}});h.when("A","askPrefetchDetailPageSearchData","askDetailPageSearchLiveSearch","askDesktopTabbing","askExpander","askDesktopDetailPageSearchPostQuestion","askDesktopDetailPageSearchCsm","askFollowupQuestions","ready").register("askDesktopDetailPageSearchWidget",function(a,b,e,d,g,f,l,k){var h=a.$;return{setup:function(){var a=h(".askSearchResultsContainer"),q=h(".askSearchTabHeaders"),r=h(".askDPSearchForm"),p=h(".askDPSearchFailureMessage"),t=h(".askPostQuestionPromptContainer"),
w=h(".askDPSearchQuestionErrorContainer"),u=h(".askDPSearchSearchIndicator"),v=h(".askDPSearchResultsViewableContent");e.setup(r,".askDPSearchTextInput",{liveSearchStartCallback:function(){w.children().hide();u.removeClass("aok-hidden");u.show()},liveSearchDoneCallback:function(b){v.removeClass("aok-hidden");a.html(b);q.show();t.show();p.hide();u.hide();d.switchToTab(0)},liveSearchClearCallback:function(){k.resetSWDPSearchSource();a.empty();q.hide();t.hide();p.hide();u.hide();w.children().hide()},
liveSearchFailCallback:function(){a.empty();q.hide();t.hide();u.hide();p.show()}});b.setup();d.setup();g.setup(a);f.setup();l.setup();k.idempotentSetup()}}});h.when("jQuery","askExpander","ready").register("askDesktopSingleAnswerPage",function(a,b){return{setup:function(){b.setup(a(".askAnswerAndComments"))}}});h.when("A").execute(function(a){a.on("a:dropdown:selected:question_order_dropdown",function(a){p.location=a.value})});h.when("jQuery","ready").execute(function(a){"placeholder"in document.createElement("textarea")||
a(".askQuestionForm textarea").each(function(){""===a(this).val()&&""!==a(this).attr("placeholder")&&a(this).val(a(this).attr("placeholder"));a(this).focus(function(){a(this).val()===a(this).attr("placeholder")&&a(this).val("")});a(this).blur(function(){""===a(this).val()&&a(this).val(a(this).attr("placeholder"))})})});h.when("jQuery","askAuthenticatedAjax","ready").register("askVoteControl",function(a,b){return{setup:function(e){e.undelegate(".voteAjax form","submit",b.handler);e.undelegate(".voteAjax form",
"ajax:beforeSend");e.undelegate(".voteAjax form","ajax:send");e.undelegate(".voteAjax form","ajax:error");e.undelegate(".voteAjax form","ajax:success");e.delegate(".voteAjax form","submit",b.handler);e.delegate(".voteAjax form","ajax:beforeSend",function(b,e){var f=a(b.currentTarget),l=f.closest(".voteAjax");if(l.hasClass("up")&&f.hasClass("up")||l.hasClass("down")&&f.hasClass("down"))return b.preventDefault(),e.abort(),!1});e.delegate(".voteAjax form","ajax:error",function(d,g){if(401===g.status||
466===g.status)e.undelegate(".voteAjax form","submit",b.handler),a(d.currentTarget).trigger("submit")});e.delegate(".voteAjax form","ajax:success",function(b){b=a(b.currentTarget);var e=b.closest(".voteAjax"),f=e.find(".label"),l=e.find(".count"),k=b.hasClass("up")?1:-1,k=parseInt(f.attr("data-count"),10)+k;f.attr("data-count",k);l.text(""+k);e.attr("class","vote voteAjax "+b.attr("class"))})}}});h.when("A","ready").register("askDesktopTabbing",function(a){function b(a){(function(a){var b=d(".askSearchResultsHeader");
a=d(b.get(a));b.removeClass("askSearchResultsHeaderActive");a.addClass("askSearchResultsHeaderActive")})(a);(function(a){var b=d(".askSearchResults");a=d(b.get(a));b.removeClass("askSearchResultsActive");a.addClass("askSearchResultsActive")})(a)}function e(){a.declarative("ask-dpsearch-desktop-go-to-tab","click",function(a){d(".askSearchResultsHeader").index(a.$target);b(a.data.index)})}var d=a.$;return{setup:function(){e()},switchToTab:b}});h.when("A","askAbstractDetailPageSearchPostQuestion","askUtils",
"ready").register("askDesktopDetailPageSearchPostQuestion",function(a,b,e){var d=a.$;return{setup:function(){var a=d(".askDPSearchForm"),f=d(".askDPSearchQuestionErrorContainer"),l=f.find(".askBadQuestionError"),k={postQuestionTextInputSelector:"input.askDPSearchTextInput",callbacks:{goodQuestion:e.makeRateLimited(function(){a.submit()},{minPeriodInMilliseconds:2E3}),badQuestion:function(){f.children().hide();l.show()}}};b.setup("ask-dpsearch-desktop-post-question",k)}}});h.when("A","askCsmCounter",
"askLogClickCsm","ready").register("askDesktopDetailPageSearchCsm",function(a,b,e){return{setup:function(){a.declarative("ask-dpsearch-desktop-input-change","change",function(){b.logCounterMetric("ask-dpsearch-desktop-input-change")});a.declarative("ask-dpsearch-desktop-input-keyup","keyup",function(){b.logCounterMetric("ask-dpsearch-desktop-input-keyup")});var d=b.createRateLimitedCsmLogHandler("ask-dpsearch-desktop-input-click");a.declarative("ask-dpsearch-desktop-input-click","click touchstart",
d);d=b.createRateLimitedCsmLogHandler("ask-dpsearch-desktop-input-focusin");a.declarative("ask-dpsearch-desktop-input-focusin","focusin",d);e.idempotentSetup()}}});h.when("A","jQuery","ready").register("askModerationControl",function(a,b){function e(a,b){var d="";b.forEach(function(b){d+=a.replace(/##marketplace##/g,b.marketplace||"").replace(/##uri##/g,b.uri||"").replace(/##subject##/g,(b.subject||"").id).replace(/##text##/g,b.text||"").replace(/##author##/g,b.actorId||"").replace(/##submitDate##/g,
b.submitDate||"").replace(/##contentState##/g,b.contentState||"").replace(/##moderationState##/g,b.moderationState||"")});return d}function d(a,b){var d="";b.forEach(function(b){d+=a.replace(/##marketplace##/g,b.marketplace||"").replace(/##uri##/g,b.uri||"").replace(/##subject##/g,b.questionUri||"").replace(/##text##/g,b.text||"").replace(/##author##/g,b.actorId||"").replace(/##submitDate##/g,b.submitDate||"").replace(/##contentState##/g,b.contentState||"").replace(/##moderationState##/g,b.moderationState||
"")});return d}function g(a){a=a.serializeArray();var d={};b.map(a,function(a,b){d[a.name]=a.value});return d}return{setup:function(f){function l(){var c=g(f.find("#byCustomerForm"));if(m(c,["customerId","type"])){var b=c.type,k;a:switch(b){case "questions":k=f.find("#questionResultTable");break a;case "answers":k=f.find("#answerResultTable");break a;default:k=null}var h="answers"===b?d:e;a.get("/ask/moderator/searchByCustomer/"+b,{params:c,success:function(a){var c=v(a.items,"uri");C.val(a.nextPageToken||
"");k.find("tbody").append(h(z,c)).parent().show()},error:y})}}function k(b,k){var h=g(f.find("#byThreadForm"));m(h,["questionId"])&&(b&&a.get("/ask/moderator/searchByThread/questions",{params:h,success:function(a){a=a.items;G.find("tbody").append(e(z,a)).parent().show()},error:y}),k&&a.get("/ask/moderator/searchByThread/answers",{params:h,success:function(a){a=a.items;c.val(A.find("tbody tr").length+a.length);A.find("tbody").append(d(z,a)).parent().show()},error:y}))}function h(c,b,d){a.post("/ask/moderator/moderate/"+
d,{params:{action:c,uris:b.join(",")},success:D,error:y})}function m(a,c){var b=[];c.forEach(function(c){var d="Field "+c+" must be specified.";c=a[c]&&0!==a[c].trim().length?void 0:d;c&&b.push(c)});return b.length?(q(b),!1):!0}function q(a){a="<ul>"+b.map(a,function(a){return"<li>"+a+"</li>"}).join("")+"</ul>";var c=f.find(".moderationError");c.show();c.find(".a-alert-content").html(a)}function r(){f.find(".moderationError").hide().find(".a-alert-content").html("");f.find(".moderationSuccess").hide().find(".a-alert-content").html("")}
function p(){f.find("#questionResultTable").hide().find("tbody").html("");f.find("#answerResultTable").hide().find("tbody").html("")}function t(){C.val("");c.val(0);B.val(10)}function w(a){var c=[];a.find("tbody tr").each(function(a,d){if(b(d).find("input:checkbox").is(":checked")){var e=b(d).find(".itemUri").data("uri");-1===c.indexOf(e)&&c.push(e)}});return c}function u(a){a=a.attr("id");return a.match("question")?"questions":a.match("answer")?"answers":""}function v(a,c){var b=[];return a.filter(function(a){a=
a[c]||"";var d=-1===b.indexOf(a);d&&b.push(a);return d})}function D(a){f.find(".moderationSuccess").show().find(".a-alert-content").html("Action Success!")}function y(a){q(["Error Encountered: "+a.http.responseText])}var z=f.find("#template-tr-item").first().html(),G=f.find("#questionResultTable"),A=f.find("#answerResultTable"),C=f.find("input[name='nextPageToken']"),c=f.find("input[name='offset']"),B=f.find("input[name='limit']"),E="byThread";a.on("a:tabs:searchCriterion:select",function(a){E=a.selectedTab.tabName});
f.delegate(".searchByCustomer","click",function(a){r();p();t();l()});f.delegate(".searchByThread","click",function(a){r();p();t();k(!0,!0)});f.delegate(".loadMore","click",function(a){r();"byCustomer"===E?l():k(!1,!0)});f.delegate(".unsuppress","click",function(a){r();f.find("table:visible").each(function(a,c){var d=b(c),e=w(d);(d=u(d))&&e.length&&h("unsuppress",e,d)})});f.delegate(".suppress","click",function(a){r();f.find("table:visible").each(function(a,c){var d=b(c),e=w(d);(d=u(d))&&e.length&&
h("suppress",e,d)})});f.delegate(".suppressAll","click",function(c){r();(c=f.find("input[name='questionId']").val())?confirm("Are you sure to suppress the question and all the answers to it?")&&a.post("/ask/moderator/moderate/suppressAll",{params:{questionId:c.trim()},success:D,error:y}):q(["No Question Specified."])});f.delegate("input[name='selectAll']","change",function(a){a=this.checked;b(this).parents("table").find("tbody input:checkbox").prop("checked",a)});f.delegate("select[name='type']",
"change",function(a){r();p()})}}});h.when("A","a-modal","a-alert","ready").register("askDesktopAnswerSolicitationPostAnswer",function(a,b,e){return{setup:function(d){var g=a.$("#askPostAnswerFormSection-"+d),f=a.$("#askPostAnswerForm-"+d),h=a.$("#askAnswerTextArea-"+d),k=a.$("#askPostAnswerResponse-"+d),n=a.$("#askPostAnswerSpinner-"+d),m=e("#askPostAnswerError-"+d);a.declarative.create(f,"ask-post-answer-submit");a.declarative("ask-post-answer-submit","submit",function(d){d.$event.preventDefault();
g.children().hide();a.post(f.attr("action"),{withCredentials:!0,params:f.serializeArray(),indicator:n,success:function(d,e,f){k.html(d);d=a.$(".askAnswerMoreQuestionsModal");d.length?b.create(d,{name:"askAnswerMoreQuestionsModal",inlineContent:d,height:305,width:427}).show():(k.show(),h.val(""))},error:function(b){401===b.http.status||409===b.http.status?(a.declarative.remove(f,"ask-post-answer-submit"),f.submit()):(f.show(),m.html(b.http.responseText).show())}})})}}})});