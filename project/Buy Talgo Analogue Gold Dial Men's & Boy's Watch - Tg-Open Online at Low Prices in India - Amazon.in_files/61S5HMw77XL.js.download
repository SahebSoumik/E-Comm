(function(p){var n=window.AmazonUIPageJS||window.P,u=n._namespace||n.attributeErrors,h=u?u("DetailPageImageBlockAssets"):n;h.guardFatal?h.guardFatal(p)(h,window):h.execute(function(){p(h,window)})})(function(p,n,u){p.register("postMetric",function(){return{postCountMetric:function(b){if("undefined"!==typeof b){var a=n.ue;if(a){var c=a.count(b)||0;a.count(b,c+1)}}},postTimeMetric:function(b,a){if("undefined"!==typeof b&&"undefined"!==typeof a){var c=n.ue;c&&c.count(b,a)}}}});p.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});p.register("postEarlyMetric",function(){return null});p.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(b,a,c,e){b=b.extend(!0,{},c,e);var f=new a(b);p.register("ImageBlockAPI",function(){return f.api});return f});p.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(b,a,c){b=c.airyConfig;b.jsUrl&&p.load.js(b.jsUrl);b.cssUrl&&p.load.css(b.cssUrl)});
p.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(b,a,c,e,f,g){var l={};return function(b){var h=this;h.dispatch=function(b,c){var d=l[b];f.isDefined(d)&&a.each(d,function(a,b){b.call(n,c)})};h.register=function(a,b){f.isDefined(l[a])||(l[a]=[]);"function"===typeof b&&l[a].push(b)};h.model=new c(b,h);h.view=new e(b,h,h.model);h.api=new g(b,h,h.model);h.init=function(){h.model.init();h.view.init()};h.init()}});
p.when("A","jQuery","imageBlockUtils").register("ImageBlockModel",function(b,a,c){function e(a,b,e,f,g){c.isDefined(a)&&(u.type=a);c.isDefined(b)&&(u.index=b);c.isDefined(e)&&(u.thumbnailIndex=e);c.isDefined(f)&&(u.variant=f);c.isDefined(g)&&(u.color=g)}function f(a){e("image",0,0,"MAIN",a||n.landingAsinColor||n.defaultColor)}function g(a){a=a.data;y=b.copy(u);e(a.type,a.index,a.thumbnailIndex,a.variant,a.color)}function l(a){g(a);a=b.copy(a);a.data=b.copy(u);p.dispatch("updateView",a)}function h(){y=
b.copy(u);f(u.color)}var n,p,u={},y={},W,C;return function(a,c){p=c;n=a;p.register("updateSelection",l);p.register("updateModel",g);p.register("resetModel",h);this.init=function(){f()};this.getCurrentItem=function(){return b.copy(u)};this.getPreviousItem=function(){return b.copy(y)};this.setCurrentEvent=function(a){W=a};this.getCurrentEvent=function(){return W};this.setImmersiveViewModalInstance=function(a){C=a};this.getImmersiveViewModalInstance=function(){return C}}});p.when("ImageBlockBTF",
"postMetric").execute(function(b,a){function c(a,b,d,e,f){function l(a){"click"===a.type&&e.postCountMetric("thumbClick");"click"===a.type&&G.overrideAltImageClickAction?M.dispatch("thumbActionClick",a):M.dispatch("updateSelection",a)}function h(a){G.useClickZoom||M.dispatch("imageClick",a)}function p(a){G.useClickZoom||M.dispatch("imageHover",a)}function u(a){M.dispatch("button360Click",a)}function C(b){!d.isDefined(b)||"swatchClick"!==b.type&&"updatedData"!==b.type?(H.update(b),"swatchHover"!==
b.type&&K.getPreviousItem().thumbnailIndex!==b.data.thumbnailIndex&&e.postCountMetric(b.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",b.data)):H.render(b.data.color,!1,b.onload)}function x(a){M.dispatch("resize",a)}function F(a){d.selectThumbnail(a,E)}function t(a){var b=a.data,c;b&&"ingress"!==b.type&&"click"===a.type&&(c=a);return c}function A(a){var b=K.getCurrentItem(),c={type:"click"};c.$declarativeParent=a;c.data=b;return c}var H,G,M,K,E;return function(c,d,e){H=
this;G=c;M=d;K=e;E=b("#imageBlock #altImages ul");var m=b("#imageBlock .canvas"),r=b("#main-image-container"),J;H.subViews=[];for(d=0;d<f.length;d++)H.subViews.push(new f[d](c,e,H,M));H.render=function(a,c,d){var e=0;E.find(".item").remove();a=a||K.getCurrentItem().color;b.each(H.subViews,function(b,f){e=f.render(a,e,m,E,r,c,d)||e});var f=E.find(".a-button-selected").closest(".a-declarative");J=A(f)};H.init=function(){E=b("#imageBlock #altImages ul");var c=E.find(".a-button-selected").closest(".a-declarative"),
d=c.data("action"),c=c.data(d)||{};c.color=G.landingAsinColor||G.defaultColor;M.dispatch("updateModel",{data:c});H.render(c.color,!0);G.isDebug&&n.console&&console.log(G);M.register("updateView",C);M.register("selectThumbnail",F);G.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter","mouseleave"],l);a.declarative("thumb-action",["click"],l);a.declarative("main-image-click",["click"],h);a.declarative("main-image-click",["mouseenter","mouseleave"],p);a.declarative("button-360-click",
["click"],u);b(n).resize(x)};H.update=function(a){b.each(H.subViews,function(b,c){c.update(a)});G.usePeekHover&&("mouseleave"===a.type?M.dispatch("updateSelection",J):"click"===a.type&&(J=t(a)||J))}}}var e=["A","jQuery","imageBlockUtils","postMetric"].concat(b.views);p.when.apply(p,e).register("ImageBlockView",function(){for(var a=arguments[0],b=arguments[1],e=arguments[2],f=arguments[3],l=[],h=4,n=arguments.length;h<n;h++)l.push(arguments[h]);return c(a,b,e,f,l)})});p.when("A","jQuery",
"imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(b,a,c,e,f,g,l){function h(b,e,f,g){if(!c.isjQueryObjDefined(b.find(".a-button-selected"))){var k=w.getCurrentItem();if(!g||"chromeless-video"!==k.type||!E.autoplayVideo){g=0;"image"===k.type&&(g=Math.max(u(k.color,k.variant),0));var l=e+g;l>=f&&(g=0,l=e);e=c.getImageHash(k.color,g,E);-1!==e&&(N.dispatch("updateModel",{data:{index:g,thumbnailIndex:l,variant:e.variant,
type:"image"}}),e=b.find(".item").get(l),c.selectGivenThumbnail(a(e),b))}}}function n(b,e,f){e=E.colorImages&&E.colorImages[e];var k=b;c.isDefined(e)&&(a.each(e,function(a,e){b<E.maxAlts&&(c.createThumbnail({type:"image",index:a,thumbnailIndex:b,variant:e.variant},e.thumb,O,"imageThumbnail"),b++)}),g.isEnabled&&l.logAltImgRequestPlacedOnThumbnails(a,g,w),h(O,k,b,f));return b}function q(b,c){if("image"===b.type){var d=a("#image-canvas-caption #canvasCaption"),e,f=E.staticStrings,g=E.colorImages,k=
b.color,l=b.index;c&&E.useIV?e=f.clickToExpand:g[k]&&g[k][l].hiRes&&E.useHoverZoom?(e=E.useHoverZoomIpad?f.touchToZoom:E.useClickZoom?f.clickToZoom:f.rollOverToZoom,E.hoverZoomIndicator&&(e="<img src='"+E.staticImages.hoverZoomIcon+"'/>&nbsp;"+e)):E.useIV&&(e=f.clickToExpand);d.html(e)}}function u(a,b){return c.getIndexForVariant(a,b,E)}function y(b,e){var f;a.each(b.main,function(a,b){c.isDefined(f)||(f=parseFloat(b[1]/b[0])<=parseFloat(E.holderRatio)?"a-stretch-vertical":"a-stretch-horizontal")});
var g="a-dynamic-image "+f,k=c.getMaxDimensionsOfMainImage(b.main,B,E),l=k[0],h=k[1],k=a("<div></div>"),l={"max-height":l,"max-width":h};k.addClass(g).css(l).attr({"data-old-hires":b.hiRes,"data-a-manual-replacement":"true",onload:e}).data("a-dynamic-image",b.main);return k}function W(a){var c=Q.find(".swatchHoverExp");a=y(a);c.find(".imgTagWrapper").html(a);b.loadImageManually(a);return c}function C(a){var b=B.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");
E.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(E.imgTagWrapperClasses)}function x(a,e){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){var h=c.getImageHash(a.color,a.index,E);if(-1===h)return h={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},c.lazyLoadingRequired(a,w,E)?A(a,!1,e):(N.dispatch("updateModel",h),c.showUnavailable(a.color)),-1;var r=Q.find(".item.itemNo"+a.thumbnailIndex);if(!c.isjQueryObjDefined(r)){var r=a.thumbnailIndex,r=Q.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+
r+" maintain-height"),n=y(h,e);r.find(".placeHolder").replaceWith(n);Q.find(".list").append(r);b.loadImageManually(n)}C(r);N.dispatch("loadMagnifier");q(a);E.useIV&&c.isDefined(h.hiRes)&&r.css("cursor","pointer");a.isUserGenerated&&(r=w.getPreviousItem(),n=a.variant,c.isDefined(n)&&r.thumbnailIndex!==a.thumbnailIndex&&(g.isEnabled&&l.logAltImgRequestServed(g),f.postCountMetric("ImageThumbnailSelectedVariant:"+n),0===n.indexOf("IG")&&(f.postCountMetric("IGImageSelectedVariant:"+n),f.postCountMetric("IGImageSelectedEvent:"+
a.interaction))));b.trigger("dp:image-block:update",h)}}function F(a){var e=Math.max(u(a.color,w.getCurrentItem().variant),0),e=c.getImageHash(a.color,e,E);if(-1===e)return c.lazyLoadingRequired(a,w,E)?c.lazyLoadOnHoverEnabled(E)&&(t(".3",!0),c.spinner(Q,!0),b.delay(function(){w.getCurrentEvent().data===a&&A(a,!0)},500)):c.showUnavailable(a.color),-1;var f=W(e);C(f);b.trigger("dp:image-block:update",e)}function t(b,c){c?Q.css("opacity",b):a("#imageBlock").css("opacity",b)}function A(a,b,f){J=b;S=
f;var g=a.color,k=E.colorToAsin[g];if(k&&k.asin){var l={};l.params={asin:k.asin,productGroupID:E.productGroupID,color:g};l.success=function(e){e?(c.ajaxState(k.asin,"success"),E.colorImages[g]=e.colorImage,c.isDefined(E.spin360ColorEnabled)&&(E.spin360ColorEnabled[g]=e.enable360),g===a.color&&(b&&J?a===w.getCurrentEvent().data&&(H(a),F(a)):(e={type:"updatedData",data:w.getCurrentItem(),onload:f||S},N.dispatch("updateView",e))),p.register(c.rankedImagesReadyEvent(k.asin))):c.ajaxState(k.asin,"fail")};
l.error=function(){c.ajaxState(k.asin,"fail")};l.indicator=c.spinner(Q);c.ajaxState(k.asin,void 0)&&"fail"!==c.ajaxState(k.asin,void 0)||(t(".3",b),e.load("/gp/product/features/apparel-main-image/ranked-images.html",l),c.ajaxState(k.asin,"sent"));return E.colorImages&&E.colorImages[g]}}function H(b,e){c.lazyLoadingRequired(b,w,E)||(a("#imageBlock").css("opacity","1"),Q.css("opacity","1"),c.spinner(Q,!1),Q.find("li").removeClass("selected"),a("#image-canvas-caption #canvasCaption").empty(),c.hideUnavailable(),
e&&Q.find(".list .item").remove())}function G(){var e=Q.find(".item .imgTagWrapper"),f=c.getContainerHeight(B,E.holderRatio,E.holderMaxHeight);0<f&&(B.height(f),e.height(f));Q.find("img.a-dynamic-image").each(function(){var e=a(this);e.data("a-manual-replacement")&&b.loadDynamicImage(this);var f=e.data("a-dynamic-image"),f=c.getMaxDimensionsOfMainImage(f,B,E);e.css({"max-height":f[0]+"px","max-width":f[1]+"px"})})}function M(a){q(w.getCurrentItem(),"mouseenter"===a.type)}var K,E,w,N,O,Q,B,J,S,D;return function(a,
b,e,g){K=this;E=a;w=b;N=g;E.colorImages[E.landingAsinColor]=E.colorImages[E.defaultColor];K.render=function(a,b,e,f,g,k,l){Q=e;O=f;B=g;D=n(b,a,k);k||(a=w.getCurrentItem(),c.lazyLoadingRequired(a,w,E)&&N.dispatch("updateModel",{data:{type:"lazy-loaded"}}));H(w.getCurrentItem(),!k);x(w.getCurrentItem(),l);return D};K.update=function(a){var b=a.data;w.setCurrentEvent(a);"ingress"!==b.type&&H(a.data,!1);"swatchHover"===a.type?b.color===w.getCurrentItem().color?x(w.getCurrentItem()):a.captured||-1===F(b)||
(a.captured=!0):"image"===b.type&&(b.interaction=a.type,b.isUserGenerated=!0,"mouseenter"===a.type&&f.postCountMetric("dpcc_imageThumbHovered_"+(b.thumbnailIndex+1)+"_"+D),x(b),E.usePeekHover&&"click"!==a.type||(c.selectGivenThumbnail(a.$declarativeParent,O),"click"===a.type&&f.postCountMetric("dpcc_imageThumbClicked_"+(b.thumbnailIndex+1)+"_"+D)))};N.register("imageHover",M);N.register("resize",G)}});p.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",
function(b,a,c,e,f,g){function l(a){t?a.css("cursor","url('"+y.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function h(a){var b=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(c.isDefined(b))for(var b=b[1].split("_"),e=0;e<b.length;e++){var f=b[e].match(/^([A-Z]+)(\d+(\.\d+)?)$/);c.isDefined(f)&&(a[f[1]]=parseInt(f[2],10))}return a}function p(b,q){function u(){var a;q.useClickZoom?(a=q.offsetInClickZoom,a=[Math.min(1,
Math.max(0,S[0]-(P[0]+a))/(P[2]-2*a)),Math.min(1,Math.max(0,S[1]-(P[1]+a))/(P[3]-2*a))]):a=J&&J.updatePosition();if(a&&B&&B.detailSize){var b=[B.detailSize[0]-B.rect.width,B.detailSize[1]-B.rect.height];B.detailImage.get(0).style.left=-(a[0]*b[0])+"px";B.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function z(a){var b=Y?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:"";S=Y?[b.pageX,b.pageY]:[a.pageX,a.pageY]}function x(a){Y&&a.preventDefault();z(a);q.useClickZoom?a=[P[0],P[1],P[0]+
P[2],P[1]+P[3]]:(a=J?J.offset:b.offsetParent().offset(),a=[D[0]+a.left,D[1]+a.top,D[0]+D[2]+a.left,D[1]+D[3]+a.top]);S[0]<a[0]||S[1]<a[1]||S[0]>=a[2]||S[1]>=a[3]?(q.fadeMagnifier?ea||(ea=!0,ta=setTimeout(function(){E(!0)},500)):q.useClickZoom||E(),ia&&(ia=!1,clearTimeout(pa))):(ia||(ia=!0,pa=setTimeout(function(){e.postCountMetric("dppc_hoverZoomOpened");f.isEnabled&&g.logHoverZoomRequestServed(f)},1E3)),q.fadeMagnifier&&ea&&(ea=!1,clearTimeout(ta)),u())}function E(c){c&&F.suppressMagnifier(!0);if(X&&
(B&&B.hide(),J&&(J.destroy(),J=null),X=!1,Y?(b.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),a(document).trigger("disengaged.magnifier")):a(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),C(),c))b.one("click.magnifier touchstart.magnifier",function(a){w(a,!0)})}function w(c,d){d&&F.suppressMagnifier(!1);if(!X&&!T&&(0===W&&(e.postCountMetric("dppc_hoverTime",new Date-(n.ue&&n.ue.t0||0)),W=1),ha[U]||(e.postCountMetric("dppc_hoverMain"),ha[U]=1),D=[b.position().left,
b.position().top,b.width(),b.height()],U&&(z(c),B?B.refit().show():B=new ra,q.useClickZoom||(J=J||new ka),P=B.getWindowSize(),u()),X=!0,Y?(b.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",x).bind("touchend.magnifier",E),a(document).trigger("engaged.magnifier")):(b.unbind("mousemove.magnifier"),a(document).trigger("engaged.magnifier").bind("mousemove.magnifier",x)),d)){var f=a("#zoomWindow");if(0<f.length)f.one("click.magnifier touchend.magnifier",function(a){E(!0)})}}
function C(){q.useHoverZoom&&(Y?b.bind("touchstart.magnifier touchmove.magnifier",w):b.bind("mousemove.magnifier",w))}var F=this,Q={detailImageUrl:b.attr("data-old-hires"),location:"over",locationElement:b,prelaod:"ready",zIndex:50,offsetInClickZoom:50};q=a.extend(Q,q);q.adjustment=[10,0,-10,0];var B=null,J=null,S=null,D=null,P=null,L={"null":1,"":1,undefined:1},X=!1,T=!1,U=q.detailImageUrl,Y=q.useHoverZoomIpad||0,W=0,ha={},ka=function(){function c(a){var d=Math.round(Math.min(b.width(),B.rect.width/
a));a=Math.round(Math.min(b.height(),B.rect.height/a));k.css({width:d,height:a});e=[d,a]}var d=this,e=[0,0],f=(B.detailSize&&B.detailSize[0]||5E8)/D[2],g=(B.detailSize&&B.detailSize[1]||5E8)/D[3],f=g>f?g:f;a("#magnifierLens").remove();var k=a("<div id='magnifierLens' />").css({backgroundImage:"url("+q.generalImageUrls.zoomLensBackground+")",position:"absolute"});y.showMagnifierOnHover?l(k):k.css("cursor","pointer");d.updatePosition=function(){var a=[D[2]-e[0],D[3]-e[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,
(S[0]-e[0]/2-D[0]-d.offset.left)/a[0])),c=0>=a[1]?.5:Math.max(0,Math.min(1,(S[1]-e[1]/2-D[1]-d.offset.top)/a[1])),f=D[0]+Math.round(b*a[0]),a=D[1]+Math.round(c*a[1]);k.get(0).style.left=f+"px";k.get(0).style.top=a+"px";return[b,c]};d.destroy=function(){k.remove()};d.offset=b.offsetParent().offset();c(f);d.updatePosition();k.appendTo(b.parent());B.detailImage[0].complete||B.detailImage.load(function(){var a=B.detailImage.width()/D[2];c(a);d.updatePosition()})};ka.preload=function(){F.preload(q.generalImageUrls.lensBackgroundUrl)};
var ra=function(){function e(){var f={};if("over"===q.location){var f=q.useClickZoom,l={},h=a("#leftCol"),r=a("#centerCol"),p=a("#rightCol"),t=a("#hover-zoom-end"),v=a("#actionPanelContainer"),u=c.isjQueryObjDefined(h)?h.outerHeight():r.outerHeight();l.top=c.isjQueryObjDefined(h)?h.offset().top:r.offset().top;l.bottom=u+l.top;l.right=c.isjQueryObjDefined(p)?p.offset().left:v.offset().left;l.left=f?0:h.offset().left+h.outerWidth();c.isjQueryObjDefined(t)&&t.offset().top>l.bottom&&(l.bottom=t.offset().top);
f=l}else"right"===q.location&&(f=b.offset(),f={left:f.left+b.outerWidth(),top:f.top,right:f.left+b.outerWidth()+400,bottom:f.top+400});q.minHeightElement&&(f.bottom=Math.max(f.bottom,f.top+a(q.minHeightElement).outerHeight()));f.bottom=Math.min(f.bottom,a(n).scrollTop()+a(n).height());f.left+=k[0];f.top+=k[1];f.right+=k[2];f.bottom+=k[3];f.width=f.right-f.left;f.height=f.bottom-f.top;q.enhancedHoverOverlay&&c.isDefined(n.pageXOffset)&&(l=a(n).width(),f.width=l-f.left+n.pageXOffset-18,f.height-=14);
m.css({left:f.left,top:f.top,width:f.width,height:f.height});g.rect=f;return g}function f(a){var b=new Image;g.detailSize=[0,0];b.onload=function(){g.detailSize=[b.width,b.height];u()};b.src=a.attr("src");if(0<b.width&&0<b.height)g.detailSize=[b.width,b.height];else if(q.detailImageSize)g.detailSize=q.detailImageSize;else{a=h(b.src);var c=D[2]/D[3];a.SS||a.AA?(a=a.SS||a.AA,g.detailSize=[a,a]):a.SX?g.detailSize=[a.SX,Math.round(a.SX/c)]:a.SY?g.detailSize=[Math.round(a.SY*c),a.SY]:a.SL&&(g.detailSize=
1<=c?[a.SL,Math.round(a.SL/c)]:[Math.round(a.SL*c),a.SL])}}var g=this,k=q.adjustment;a("#zoomWindow").remove();var l={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:q.zIndex};q.enhancedHoverOverlay&&(l.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",l.border="1px solid #949494",l.borderColor="rgb(148,148,148)");var m=a("<div id='zoomWindow' />").css(l);q.fadeMagnifier&&m.fadeIn(200);q.useClickZoom&&(t?m.css("cursor",'url("'+q.zoomOutIcon+'"), auto'):(m.css("cursor","-webkit-zoom-out"),
m.css("cursor","-moz-zoom-out"),m.css("cursor","zoom-out")));g.updateImage=function(b){b=a("<img id='detailImg' src='"+b+"'/>").css("position","absolute");g.detailImage&&g.detailImage.remove();m.append(b);a(document).trigger("updated.magnifier");g.detailImage=b;f(g.detailImage)};g.refit=function(){e();f(g.detailImage);return g};q.fadeMagnifier?(g.show=function(){m.fadeIn(200);return g},g.hide=function(){m.fadeOut(200);return g}):(g.show=function(){m.show();return g},g.hide=function(){m.hide();return g});
g.destroy=function(){m.remove();return g};g.getWindowSize=function(){return[g.rect.left,g.rect.top,g.rect.width,g.rect.height]};g.updateImage(U);e();m.appendTo(document.body)},ea=!1,ta,ia=!1,pa;F.preload=function(b){b=a.makeArray(b);for(var c=b.length,d=0;d<c;d++)b[d]instanceof Array?F.preload(b[d]):"string"===typeof b[d]&&b[d]&&!L[b[d]]&&(L[b[d]]=new Image,L[b[d]].src=b[d])};F.changeImage=function(c,d){X&&E();U=d;b.attr("src",c);F.preload(c);D=[b.position().left,b.position().top,b.width(),b.height()];
d&&("immediately"===q.preload?F.preload(d,!0):a(n).ready(function(){F.preload(d)}),B?B.updateImage(d):b.attr("data-old-hires",d))};F.destroy=function(){b.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");a(document).unbind("mousemove.magnifier");J&&J.destroy();J=null;B&&B.destroy();B=null};F.detailImage=function(){return B.detailImage};F.suppressMagnifier=function(a){T=a};F.isEngaged=function(){return X};F.engageMagnifier=w;F.disengageMagnifier=E;b[0].complete?C():
b.one("load",C);F.preload(b.attr("src"));if(q.preload){var wa=q.detailImageUrl,Q=function(){F.preload(wa,!0);q.useClickZoom||ka.preload()},aa=q.preload;aa.constructor!==Array&&(aa=[aa]);for(var fa=0;fa<aa.length;fa++)if("immediately"===aa[fa])Q();else if(a(n)[aa[fa]])a(n)[aa[fa]](Q);else a(n).bind(aa[fa],Q)}return F}function q(){if(y.useHoverZoom){var b={adjustment:[0,0,1,1],generalImageUrls:y.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:y.useHoverZoomIpad,
useHoverZoom:y.useHoverZoom,useClickZoom:y.useClickZoom,fadeMagnifier:y.fadeMagnifier,zoomOutIcon:y.staticImages.zoomOutCur,enhancedHoverOverlay:y.enhancedHoverOverlay||y.atfEnhancedHoverOverlay};x&&(x.destroy(),x=u);var e=F.find(".image.item.selected img[data-old-hires]").not("[data-old-hires='']");c.isjQueryObjDefined(e)?y.useClickZoom?(e.one("click.loadmagnifier touchstart.loadmagnifier",function(a){x=new p(e,b);x.engageMagnifier(a,!0)}),t?e.css("cursor",'url("'+y.staticImages.zoomInCur+'"), auto'):
(e.css("cursor","-webkit-zoom-in"),e.css("cursor","-moz-zoom-in"),e.css("cursor","zoom-in"))):x=new p(e,b):f.isEnabled&&g.logHoverZoomApplicability(a,f)}}var U,y,W,C,x,F,t=navigator.userAgent.match(/msie|trident/i);return function(a,b,c,d){U=this;y=a;W=b;f.refToModel=W;C=d;U.render=function(a,b,c,d,e,f){F=c;x&&(x.destroy(),x=u)};U.update=function(a){};C.register("loadMagnifier",q);C.register("resize",q)}});p.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",
function(b,a,c,e){function f(a,b,g){a=(a=g?g:c.getColorFromState(b.getState().hovered_variations,h))&&""!==a?a:h.defaultColor;p.dispatch("updateView",{type:"swatchHover",data:{color:a}});e.postCountMetric("swatchHover")}function g(a,b,f,g){a=(a=g?g:c.getColorFromState(b.getState().selected_variations,h))&&""!==a?a:h.defaultColor;a===n.getCurrentItem().color?"function"===typeof f&&f():(p.dispatch("updateSelection",{type:"swatchClick",data:{color:a},onload:f}),e.postCountMetric("swatchClick"))}var l,
h,n,p;return function(a,c,d,e){l=this;h=a;n=c;p=e;b.on("image-block-twister-swatch-hover",f);b.on("image-block-twister-swatch-click",g);l.render=function(a,b,c,d,e){};l.update=function(a){}}});p.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockVideoView",function(b,a,c,e,f,g){function l(b,c,d,f){!t.autoplayVideo||S||t.useChromelessVideoPlayer?!e.isjQueryObjDefined(b.find(".a-button-selected"))&&!e.productReelExperimentEnabled(t)&&(d=A.getCurrentItem(),
!f||t.prioritizeVideos||"chromeless-video"===d.type&&t.autoplayVideo)&&(f=e.getVideoHash(d.color,0,t),-1!==f&&(c+=0,H.dispatch("updateModel",{data:{index:0,thumbnailIndex:c,variant:f.variant,type:t.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),c=b.find(".item").get(c),e.selectGivenThumbnail(a(c),b))):(e.selectGivenThumbnail(b.find("img:last"),b),e.fadeToThumbnail(b.find("img").length-1,E,b))}function h(a){var b=A.getCurrentItem().color;if(t.useChildVideos&&!t.colorToVideo[b]){var c=
function(){if(a){t.colorToVideo[b]=a;var c={type:"updatedData",data:A.getCurrentItem()};H.dispatch("updateView",c)}};t.lazyLoadExperienceDisabled?c():p.when(e.rankedImagesReadyEvent(t.colorToAsin[b].asin)).execute(function(){c()})}}function n(a){if(!t.useChildVideos)return e.lazyLoadingRequired(A.getCurrentItem(),A,t)?void 0:t.videos;if(t.colorToVideo[a])return t.colorToVideo[a];var b=t.colorToAsin[a];if(b&&b.asin){var c={};c.params={asin:b.asin,productGroupID:t.productGroupID,useAiryVideoPlayer:!0,
useChromelessVideoPlayer:t.useChromelessVideoPlayer,isUDP:t.isUDP};t.isDPXFeatureEnabled||(c.success=function(a){h(a)},f.load("/gp/product/features/apparel-main-image/videos.html",c));return t.colorToVideo&&t.colorToVideo[a]}}function q(){H.dispatch("selectThumbnail",e.productReelExperimentEnabled(t)?1:0)}function u(b,f,k,l){return c.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:b[0],streamingUrls:f.url,swfUrl:k.swfUrl,foresterMetadataParams:k.foresterMetadataParams,backgroundColor:"transparent",
flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=e.isjQueryObjDefined(b.find("video"))?"HTML5":"FLASH";g.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){b.parent().css("z-index",8)},videounsupported:function(){q();g.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){q();g.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){N.seek(0)}},cuePoints:[{values:f.durationSeconds-1,type:"position",
callback:function(c,d,e){c=e.durationSeconds-e.playheadTimeSeconds;b.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*c,.1,function(){b.parent().css({"background-color":"transparent","z-index":-1});q();a(this).show().css("opacity",1)})}}]})}function y(c){if("chromeful-video"===c.type||"chromeless-video"===c.type){var d=e.getVideoHash(c.color,c.index,t);if(-1===d)return-1;if("chromeful-video"===c.type){c=E.width()/E.height();var f=parseInt(d.videoWidth,10),g=parseInt(d.videoHeight,
10);e.updateAspectRatio(c,f,g,M);N?(N.show(),e.loadMediaIntoAiry(N,d,O)):N=e.createAiryInstanceForChromeful(M,d,O,null,t.autoplayVideo,E,K,G);b:if(e.productReelExperimentEnabled(t)){if(1<e.getVideosCount(A.getCurrentItem().color,t)){if(e.isDefined(w)){K.show();break b}w=a('<a class="more-videos"></a>').attr("href","#").text(t.staticStrings.watchMoreVideos);K.find("#videoCaption").append(w);b.declarative.create(w,"videoIngressClick",Q)}e.playVideoInImmersiveView(t,A.getCurrentItem().color)&&(b.declarative.create(M,
"videoIngressClick",Q),M.children().css("z-index","-1"),M.css("display","inline-block"))}else K.find("#videoCaption").text(t.staticStrings.playVideo),K.show();d=N;t.autoplayVideo&&d&&!S&&(e.toggleVideoCaption(K),d.setVolume(0),d.show(),d.play(),S=!0)}else N?(N.show(),e.loadMediaIntoAiry(N,d,O),N.play(),K.show()):(N=u(M,d,O))&&N.play()}}function W(b,c,d){var f=n(c);c=b;e.isDefined(f)&&0<f.length&&t.alwaysIncludeVideo&&b===t.maxAlts&&(G.find(".item:last").remove(),b--);e.isDefined(f)&&(a.each(f,function(a,
c){if(b<t.maxAlts){var d=t.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",k={type:d,index:a,thumbnailIndex:b,variant:c.variant};Q={type:"video-ingress",index:a,thumbnailIndex:b,variant:c.variant};e.productReelExperimentEnabled(t)&&("chromeful-video"===d&&(D+=" videoBlockIngress",e.productReelDarkIngressEnabled(t)&&(D+=" videoBlockDarkIngress",c.thumb=c.thumb.replace("_PKmb-play-button-overlay-thumb",""))),t.altsOnLeft||(D+=" a-align-top"));e.createThumbnail(k,c.thumb,G,D);if(e.productReelExperimentEnabled(t)){C(G.find(".videoBlockIngress img"),
t.videoIngressATFSlateThumbURL);var k=1<f.length?"multiple-videos":"one-video",l=1<f.length?f.length+" "+t.staticStrings.multipleVideos:t.staticStrings.singleVideo;l&&G.find(".videoBlockIngress").append(G.find("#videoCount_template").clone().text(l).attr("id","videoCount")).addClass(k)}J||(J=!0,g.postCountMetric("chromeless-video"===d?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));b++}if(e.productReelExperimentEnabled(t))return!1}),l(G,c,b,d));return b}function C(a,b){var c=a.attr("src");
if(c&&b){a.attr("src",b);var d=new Image;d.onload=function(b){a.attr("src",c)};d.src=c}}function x(a){N&&N.pause();a.data=Q;a.clickTimeStamp=a.$event.timeStamp;var b="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";H.dispatch("imageClick",a);g.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);g.postCountMetric(b)}var F,t,A,H,G,M,K,E,w,N,O,Q,B,J=!1,S=!1,D="videoThumbnail";return function(c,d,f,k){F=this;t=c;A=d;H=k;O=t.airyConfig;t.colorToVideo={};t.colorToVideo[t.landingAsinColor]=
t.colorToVideo[t.defaultColor]=t.videos;F.render=function(c,d,f,g,k,l){G=g;M=k.find("#main-video-container");K=M.parent().find("#video-canvas-caption");E=a("#main-image-container");t.useChromelessVideoPlayer||M.addClass("chromeful-container");B=W(d,c,l);y(A.getCurrentItem());e.productReelExperimentEnabled(t)&&b.declarative("videoIngressClick",["click"],x);return B};F.update=function(a){var b=a.data;"ingress"!==b.type&&N&&(N.hide(),M.parent().css("z-index",-1),K.hide());if("swatchHover"===a.type)b.color===
A.getCurrentItem().color?y(A.getCurrentItem()):a.captured||e.lazyLoadingRequired(b,A,t)&&!e.lazyLoadOnHoverEnabled(t)&&y(A.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type)"mouseenter"===a.type&&g.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+B),y(b),t.usePeekHover&&"click"!==a.type||(e.selectGivenThumbnail(a.$declarativeParent,G),"click"===a.type&&e.productReelDarkIngressEnabled(t)&&(g.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+
1)+"_"+B),Q.action="videoIngressClick",Q.clickTimeStamp=a.$event.timeStamp,H.dispatch("videoIngressClick",Q),g.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp)))};if(t.isDPXFeatureEnabled)b.on("triggerVideoAjax",h)}});p.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(b,a,c,e,f,g,l,h,p,q){function U(a){return a.hiRes||
a.large||a.main[a.main.length-1]}function y(){v.find("#ivTitle").click(function(){V.hide()})}function W(a){if(f.productReelExperimentEnabled(R)){var b=v.find("#ivMediaSelect");b.find("option[value='"+a+"']").attr("selected",!0);b.trigger("change")}}function C(){Z=ab?{type:"360-spin"}:la.getCurrentItem()}function x(){var a=v.find("#ivStage"),b=V.$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-q.getDimension(c,"padding-top")-q.getDimension(c,"padding-bottom");v.css("height",
b);var c=v.find("#ivTitle").outerHeight(!0),d=v.find("#ivVariationSelection").outerHeight(!0),e=v.find("#ivMediaSelection").outerHeight(!0),f=v.find("#ivThumbs"),g=q.getDimension(f,"margin-top")+q.getDimension(f,"margin-bottom");f.css("height",b-c-d-e-g);v.find("#ivLargeImage").css("height",b);a.css("width",v.width()-q.getDimension(v,"padding-left")-q.getDimension(v,"padding-right")-v.find("#ivThumbColumn").width()-q.getDimension(a,"margin-left")-q.getDimension(a,"margin-right"))}function F(){v.find("#ivMediaSelect").change(function(){var a=
e(this).val();"all"===a?(v.find("#ivVideoList").hide(),v.find("#ivThumbs").show(),v.find(".ivThumbVideo").show(),"chromeful-video"===Z.type&&v.find("#ivVideo_"+Z.index).click()):"images"===a?(v.find("#ivVideoList").hide(),v.find("#ivThumbs").show(),v.find(".ivThumbVideo").hide(),"chromeful-video"===Z.type&&(0===na&&0===ca?v.find("#iv360").click():0===na?v.find("#ivHeroImage_0").click():v.find("#ivImage_0").click())):"videos"===a&&(v.find("#ivVideoList").show(),v.find("#ivThumbs").hide(),"chromeful-video"!==
Z.type?v.find("#ivVideoList_0").click():v.find("#ivVideoList_"+Z.index).click())})}function t(){var a=v.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),f=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(f=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,f=0===f?1:f,g=Math.min(b/e,c/f),k=f*g,l=e*g;1>g?(Ya?a.css("cursor","url('"+R.staticImages.zoomIn+"'), auto"):(a.css("cursor",
"-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),La=!0):La=!1;e=Math.min(l,e);f=Math.min(k-20,f);d.css({"margin-top":(c-f)/2,"margin-left":(b-e)/2,height:f,width:e});a.css("visibility","visible");Xa=!1}function A(a){var b=v.find("#ivLargeImage");b.css("visibility","hidden");b.empty();q.animateStageIn(b);b.append(a);t()}function H(){ja&&ja.pause();v.find("#ivLarge360").css("display","none");v.find("#ivLargeVideo").css("display","none");v.find("#ivLargeImage").css("display",
"none");O()}function G(a){H();v.find("#ivLargeImage").css("display","block");var b;"hero-image"===a?f.isDefined(oa)&&(b=U(oa[Z.index])):f.isDefined(va)&&(b=U(va[Z.index]));if(f.isDefined(b)){v.find(".fullscreen").remove();var c=e("<img>").attr("src",b).addClass("fullscreen"),d=v.find("#ivLargeImage");q.animateStageOut(d,function(){c.load(function(){A(c)});if(c[0].complete)A(c);else{d.empty();var a=(d.height()-104)/2,b=(d.width()-80)/2;e("<img>").attr("src",R.staticImages.spinner).css({position:"relative",
top:a+"px",left:b+"px"}).appendTo(d)}})}}function M(){var a=parseInt(Z.index,10)+1;a>=I.length||v.find("#ivVideo_"+a).click()}function K(){var a;f.isDefined(I)&&(a=I[Z.index]);if(f.isDefined(a)){H();var b=v.find("#ivLargeVideo").css("display","block");ja?(ja.isDetached()&&ja.attach(b[0]),f.loadMediaIntoAiry(ja,a,ua),ja.show()):(ja=f.createAiryInstanceForChromeful(b,a,ua,"ImmersiveView"),ua.enableContinuousPlay&&ja.bind("ended",M));ja.play({isAsync:!0})}}function E(){C();var a;"hero-image"===Z.type?
a=v.find("#ivHeroImage_"+Z.index):"image"===Z.type?(a=v.find("#ivImage_"+Z.index),W("all")):"chromeful-video"===Z.type||"chromeless-video"===Z.type?(a=v.find("#ivVideo_"+Z.index),W("videos")):a="360-spin"===Z.type?v.find("#iv360"):f.isDefined(oa)?v.find("#ivHeroImage_"+Z.index):v.find("#ivImage_"+Z.index);f.isjQueryObjDefined(a)||(a=v.find("#ivImage_0"));w(a)}function w(a){v.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(Z.type="chromeful-video",Z.index=
a.attr("id").split("_")[1],K()):a.hasClass("ivHeroImage")?(Z.type="hero-image",Z.index=a.attr("id").split("_")[1],G(Z.type)):a.hasClass("iv360Image")?(Z.type="360-spin",Z.index=0,N()):(Z.type="image",Z.index=a.attr("id").split("_")[1],G(Z.type))}function N(){H();v.find("#ivLarge360").css("display","block");D();var a=v.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});q.animateStageIn(a)},200);B();l.postCountMetric("dppc_click360");ya=Date.now()}function O(){0<ya&&(Q("dppc_duration360",
Date.now()-ya),ya=0)}function Q(a,b){n.ue&&n.ue.count(a,b)}function B(){if(0<za){var a=v.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function J(a,b){if(za<a.length){var c=e("<img />").css({display:"block",width:6*Ca+"px",height:Ba+"px"});c.hide();b.append(c);c.get(0).onload=function(){b.closest(document.documentElement).length&&(za++,1===za&&(B(),0<ya&&Q("dppc_loadTime360",Date.now()-ya)),0<qa&&Q("dppc_perSpriteloadTime360",Date.now()-qa),v.find("#iv360Spinner").hide(),
c.show(),Ia=5*ga.imageLocations[Math.floor(Na/ga.imageLocations[0].length)][Na%ga.imageLocations[0].length],J(a,b))};c.attr("src",a[za].replace(/(\._SP)\d+(,)\d+/,"$1"+xa+"$2"+Ja));qa=Date.now()}}function S(a){if(f.isDefined(ga.spriteWidthSizes)&&0<ga.spriteWidthSizes.length){var b=ga.spriteWidthSizes,c=b.length,d=b[0],e=b[c-1];if(a<=d)return d;if(a>e)return e;for(d=0;d<c;d++)if(a>b[d]&&a<=b[d+1])return b[d+1]}else return a}function D(){var a=v.find("#ivLarge360");a.children("#image-360-sprites").length||
(a.append("<div id='image-360-sprites'></div>"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),e("<img>").attr("src",R.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),Ha=!0,P())}function P(){if(f.isDefined(ga.spriteURLs)&&
f.isDefined(v)&&Ha&&!Ea){var a=v.find("#ivLarge360"),b=e("<div>").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});f.isDefined(ga.staticImages.hint360)&&e("<img>").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",ga.staticImages.hint360).appendTo(b);e("<div>").css({"text-align":"center"}).text(R.staticStrings.dragToSpin).appendTo(b);b.appendTo(a);var b=ga.imageWidth,c=ga.imageHeight,d=a.parent().width(),g=a.parent().height(),
l=0,h=0;b/c>d/g?(xa=S(d),Ja=Math.round(c/b*xa),Ca=Math.ceil(d),Ba=Math.ceil(Ja/xa*d),h=(g-Ba)/2):(Ja=S(g),xa=Math.round(b/c*Ja),Ba=Math.ceil(g),Ca=Math.ceil(xa/Ja*g),l=(d-Ca)/2);a.css({"margin-left":l,"margin-top":h,width:Ca+"px",height:Ba+"px",overflow:"hidden",position:"relative"});a.children("#image-360-sprites").css("width",6*Ca+"px");J(ga.spriteURLs,v.find("#image-360-sprites"),0);b=v.find("#ivLarge360");b.bind("mousedown",ba);b.bind("touchstart",L);b.bind("touchmove",X);b.bind("touchend",T);
e(document).bind("mousemove",Y);e(document).bind("mouseup",da);f.isDefined(R.staticImages.grab)&&a.css("cursor","url('"+R.staticImages.grab+"'), auto");Ea=!0}}function L(a){Qa=!0;Da=a.originalEvent.targetTouches[0].clientX}function X(a){Qa&&(ha(a.originalEvent.targetTouches[0].clientX-Da),Da=a.originalEvent.targetTouches[0].clientX)}function T(a){Qa&&(Qa=!1)}function ba(a){Pa=!0;Va=a.originalEvent.clientX;f.isDefined(R.staticImages.grabbing)&&(a=v.find("#ivLarge360"),a.css("cursor","url('"+R.staticImages.grabbing+
"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+R.staticImages.grabbing+"'), auto"));return!1}function Y(a){Pa&&(ha(a.originalEvent.clientX-Va),Va=a.originalEvent.clientX)}function da(a){Pa&&(Pa=!1,f.isDefined(R.staticImages.grab)&&(a=v.find("#ivLarge360"),a.css("cursor","url('"+R.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function ha(a){for(a=Ia-=a/Ca*180;0>a;)a+=360;for(;360<a;)a-=360;Ia=a;var b;a=360;for(var c=0;c<za;c++)for(var d=
0;d<ga.imageLocations[c].length;d++){var e=Math.abs(Ia-5*ga.imageLocations[c][d]);e<a&&(a=e,b=c*ga.imageLocations[0].length+d)}b!==Na&&(a=Math.floor(b/ga.imageLocations[0].length),a!==Math.floor(Na/ga.imageLocations[0].length)&&(f.isDefined(Wa)||(Wa=document.createElement("canvas").getContext("2d")),c=v.find("#image-360-sprites").children(),Wa.drawImage(c[a],0,0)),a=v.find(".iv360Hint").not(".iv360HintFaded"),f.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));Na=b;a=b%ga.imageLocations[0].length*
-1*Ca;b=-1*Math.floor(b/ga.imageLocations[0].length)*Ba;c=v.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform","translate3d("+a+"px, "+b+"px, 0)");c.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function ka(){v.delegate(".ivThumb","click",function(){var a=e(this);w(a)});v.delegate(".ivThumbVideoListOuter","click",function(){v.find(".ivThumbVideoListOuter").removeClass("selected");var a=e(this);a.addClass("selected");Z.type="chromeful-video";Z.index=a.attr("id").split("_")[1];
K()})}function ra(){ja&&!ja.isDetached()&&(ua.volume=ja.getVolume(),ja.detach(),!document.all||n.atob||document.addEventListener||(ja=null));v.find("#ivLargeImage").empty();O()}function ea(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function ta(a){var b=Fa.top-(a.pageY-Oa[1])*Ka;a=ea(Fa.left-(a.pageX-Oa[0])*Ka,Sa.left);b=ea(b,Sa.top);v.find(".fullscreen").css({left:a,top:b})}function ia(){v.delegate("#ivLargeImage","click",function(a){if(Xa)t();else if(La){v.find(".fullscreen").removeAttr("style");
if(La){var b=v.find("#ivLargeImage"),c=b.find(".fullscreen");Ya?b.css("cursor","url('"+R.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Xa=!0;var d=v.find("#ivLargeImage");Sa.left=d.width()-c.width();Sa.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;Oa=[b.offset().left+e,b.offset().top+d];Fa.top=d-c.height()/2;Fa.left=e-c.width()/2;c.css({position:"relative",left:Fa.left,top:Fa.top});Ka=Math.max(c.height()/
b.height(),c.width()/b.width())}ta(a)}});v.delegate("#ivLargeImage","mousemove",function(a){Xa&&ta(a)})}function pa(c){if(f.isImmersiveViewEnabled(R,la.getCurrentItem().color)){ab=f.isDefined(c)&&"button-360-click"===c.action;h.isEnabled&&p.logImmersiveViewRequestServed(h);l.postCountMetric("dppc_immersiveViewOpened");if(f.isDefined(V))V.show();else{c=e("#auiImmersiveViewDiv");var d=e(n).height()-150,g=e(n).width()-75;V=a.create(c,{name:"immersiveView",activate:"onclick",width:g,height:d,popoverLabel:"ImmersiveView",
hideHeader:!0});c.click()}if(Za){v=e("#ivMain");c=la.getCurrentItem().color;va=R.colorImages[c];oa=R.heroImage[c];I=R.useChildVideos?R.colorToVideo[c]:R.videos;Ra=aa()&&R.spin360ColorEnabled[c];ga=aa()?R.spin360ColorData[c]:u;C();sa=ca=Ga=na=0;f.isDefined(oa)&&(ca=oa.length);f.isDefined(va)&&(na=va.length);f.isDefined(I)&&(Ga=I.length);Ra&&(sa=1);q.populateTitle(v.find("#ivTitle"),45,R);q.populateVariationSelection(v.find("#ivVariationSelection"));c=v.find("#ivMediaSelect");0===na+sa||0===Ga?(c.parent().hide(),
v.find("#ivThumbs").addClass("noMediaSelection")):(c.empty(),e("<option/>").attr("value","all").prop("selected",!0).text(R.staticStrings.allMedia+" ("+(ca+na+sa+Ga)+")").appendTo(c),e("<option/>").attr("value","images").text(R.staticStrings.images+" ("+(ca+na+sa)+")").appendTo(c),e("<option/>").attr("value","videos").text(R.staticStrings.videos+" ("+Ga+")").appendTo(c),c.parent().show(),c.val("all"));c=v.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var d=ca+na+Ga+sa,t=g=0;g<
d;)for(var w=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),x=0;3>x&&g<d;x++,g++,t++)if(t<ca){var B=oa[g].thumb,A=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+g).appendTo(w);A.find(".ivThumbImage").css("background",'url("'+q.getResizedThumbnailURL(B)+'") center no-repeat')}else if(t>=ca&&t<na+ca)B=va[g-ca].thumb,A=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+
(g-ca)).appendTo(w),A.find(".ivThumbImage").css("background",'url("'+q.getResizedThumbnailURL(B)+'") center no-repeat');else if(t>=ca+na&&t<na+ca+sa)A=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(w),A.find(".ivThumbImage").css("background",'url("'+(f.isDefined(R.staticImages.icon360)?q.getResizedThumbnailURL(R.staticImages.icon360,!0):"")+'") center no-repeat');else if(B=I[g-na-ca-sa],A=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id",
"ivVideo_"+(g-na-ca-sa)).appendTo(w),A.find(".ivThumbImage").css("background",'url("'+B.thumbUrl+'") center no-repeat'),f.isDefined(B)){var y={position:"triggerTop"},E=v.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");E.find(".ivVideoPopoverTitle").text(B.title);E.find(".ivVideoPopoverDuration").text(B.durationTimestamp);y.inlineContent=E[0];b.declarative.create(A,"a-tooltip",y)}c=v.find("#ivVideoList");c.find(".ivThumbVideoListOuter").not(".placeholder").remove();
d=c.find(".placeholder");for(g=0;g<Ga;g++)t=I[g],w=d.clone().removeClass("placeholder").appendTo(c),w.attr("id","ivVideoList_"+g),w.find(".ivThumbImage").css("background",'url("'+t.thumbUrl+'") center no-repeat'),w.find(".ivThumbTitle").text(t.title),w.find(".ivThumbDuration").text(t.durationTimestamp);v.find("#ivLarge360").empty();za=0;Ea=Ha=!1;ua=R.airyConfig;Za=!1;Ua()}}}function wa(a){var b=R.colorToAsin[a],c={},d=500;if(b&&b.asin){c.params={asin:b.asin};var e="360"+b.asin,h=Date.now();c.success=
function(b){Q("dppc_asyncRequestTime360",Date.now()-h);b&&f.isDefined(b.spin360.spin360Model)?(f.ajaxState(e,"success"),R.spin360ColorData[a]=b.spin360.spin360Model,a===la.getCurrentItem().color&&(ga=R.spin360ColorData[a],P())):c.error()};c.error=function(){l.postCountMetric("dppc_asyncFailed360");Q("dppc_asyncRequestTime360",Date.now()-h);d*=2;16E3>=d?setTimeout(function(){h=Date.now();g.load("/gp/product/features/apparel-main-image/360.html",c)},d):f.ajaxState(e,"fail")};f.ajaxState(e)&&"fail"!==
f.ajaxState(e)||(g.load("/gp/product/features/apparel-main-image/360.html",c),f.ajaxState(e,"sent"))}}function aa(){return f.isDefined(R.spin360ConfigEnabled)&&R.spin360ConfigEnabled}var fa,R,la,ma,V,v,oa,va,I,ca,na,Ga,sa,Z,ja,ua,ga,Ra,Ca,Ba,Ja,xa,Va,Da,ab=!1,Ha=!1,Ea=!1,Ia=0,Na=0,ya=0,qa=0,Pa=!1,Qa=!1,za=0,Wa,Ya=navigator.userAgent.match(/msie|trident/i),Za=!0,Xa=!1,La=!1,Sa={},Fa={},Ka,Oa,Ua=b.once(function(){F();ka();ia();b.on("a:popover:afterUpdatePosition:immersiveView",x);b.on("a:popover:afterShow:immersiveView",
E);b.on("a:popover:afterHide:immersiveView",ra);y()});return function(a,c,d,g){fa=this;R=a;la=c;h.refToModel=la;ma=g;aa()&&(R.spin360ColorData[R.landingAsinColor]=R.spin360ColorData[R.defaultColor],R.spin360ColorEnabled[R.landingAsinColor]=R.spin360ColorEnabled[R.defaultColor]);f.isDefined(R.staticImages.icon360)&&e("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",q.addStyleCodeToURL(R.staticImages.icon360,"_FMpng_RI_"));fa.render=function(a,c,d,e,g,h){Za=!0;aa()&&R.spin360ColorEnabled[a]&&
!f.isDefined(R.spin360ColorData[a])&&(R.spin360ColorData[a]={},wa(a));f.isImmersiveViewEnabled(R,la.getCurrentItem().color)&&aa()&&R.spin360ColorEnabled[a]&&(c===R.maxAlts&&(a=e.find(".item.imageThumbnail"),d=e.find(".item.videoThumbnail"),f.isDefined(d)&&1<d.length?d.last().remove():a.last().remove(),c--),a=e.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),b.declarative.create(a,"button-360-click"),e.append(a),c++,l.postCountMetric("dppc_display360"));
return c};fa.update=function(a){};ma.register("imageClick",pa);ma.register("button360Click",pa)}});p.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(b,a,c,e,f,g,l,h,p,q){function u(){var a=F.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),c=a.find(".a-popover-inner"),a=a.height()-q.getDimension(c,
"padding-top")-q.getDimension(c,"padding-bottom");e("#iv-tab-view-container").css("height",a);H=e("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==e(this).css("display")}).length;1<H?(e("#iv-tab-view-container ul.iv-tab-views li").parent().show(),c=e("#iv-tab-view-container ul.iv-tab-views li").parent().height(),a-=c):e("#iv-tab-view-container ul.iv-tab-views li").parent().hide();e("#iv-tab-view-container .iv-tab-content").css("height",a);b.trigger("dp:image-block:immersive-view:resize")}
function y(){b.trigger("dp:image-block:immersive-view:reset")}function W(c){if(f.isImmersiveViewEnabled(x,F.getCurrentItem().color)){h.isEnabled&&p.logImmersiveViewRequestServed(h);l.postCountMetric("dppc_immersiveViewOpened");f.isDefined(c)&&("button-360-click"===c.action?e("#iv360TabHeading").click():"videoIngressClick"===c.action?(G=c.clickTimeStamp,e("#ivVideosTabHeading").click()):e("#ivImagesTabHeading").click());var d=F.getImmersiveViewModalInstance();if(f.isDefined(d))d.show();else{c=e("#auiImmersiveViewDiv");
var d=Math.min(Math.max(e(n).height()-150,540),1080),g=Math.min(Math.max(e(n).width()-75,990),1980),d=a.create(c,{name:"immersiveView",activate:"onclick",width:g,height:d,popoverLabel:"ImmersiveView",hideHeader:!0});F.setImmersiveViewModalInstance(d);c.click()}A&&(A=!1,M(),b.trigger("dp:image-block:immersive-view:init"))}}var C,x,F,t,A=!0,H=0,G,M=b.once(function(){b.on("a:popover:afterUpdatePosition:immersiveView",u);b.on("a:popover:afterShow:immersiveView",u);b.on("a:popover:afterHide:immersiveView",
y)}),K=b.once(function(){var a=e("#iv-tab-view-container ul.iv-tab-views li");a.bind("click",function(c){var d=a.filter(".iv-active");d.attr("id")!==e(this).attr("id")&&b.trigger("dp:ivTabs:"+d.find("a").attr("data-iv-tab-view")+":deselect",c);a.removeClass("iv-active");e(this).addClass("iv-active");e("#iv-tab-view-container .iv-tab-content").hide();d=e(this).find("a").attr("data-iv-tab-view");e("#"+d).show();"ivVideosTab"===d&&(c.clickTimeStamp=G||c.timeStamp);b.trigger("dp:ivTabs:"+d+":select",
c);l.postCountMetric("dppc_"+d);return!1})});return function(a,b,c,d){C=this;x=a;F=b;h.refToModel=F;t=d;C.render=function(a,b,c,d,e,f){l.postCountMetric("dpcc_altThumbs_"+b);A=!0};C.update=function(a){};C.getTitle=function(){};C.getVariationSelectionInfo=function(){};K();t.register("imageClick",W);t.register("button360Click",W);f.productReelDarkIngressEnabled(x)&&t.register("videoIngressClick",W)}});p.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(b,a,c){return{load:function(a,
c){c=c||{};c.timeout=c.timeout||4E3;b.ajax(a,c)}}});p.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric").register("imageBlockUtils",function(b,a,c,e,f,g,l,h){function p(a){return null!==a&&"undefined"!==typeof a}function q(b){var c=0;a.each(b,function(a,b){var d=parseInt(b[1],10);d>c&&(c=d)});return c}function u(b){var c=0;a.each(b,function(a,b){var d=parseInt(b[0],10);d>c&&(c=d)});return c}function y(a,b,c){b=b.width();
if(c.naturalMainImageSize)return b;a=q(a);0<a&&(b=Math.min(b,a));return b}function W(a,b,c){b=b.height();if(c.naturalMainImageSize)return b;a=u(a);0<a&&(b=Math.min(b,a));return b}function C(b){var c;a.each(b,function(a,b){p(c)||(c=b[1]/b[0])});return c||1}function x(a,b,c){b.fadeTo(500,0,function(){t(a,c);b.fadeTo(500,1)})}function F(a){a&&a.toggle()}function t(b,c){var d=c.find("img");p(d[b])&&a(d[b]).click()}function A(a,b){Q[a]=b?b:Q[a];return Q[a]}function H(b,c,d){d=d||O;d=d.colorImages;if(1>
d.length||!p(d[b])||!p(c))return-1;var e=-1;a.each(d[b],function(a,b){b.variant===c&&(e=a)});return e}function G(b,c,d){d=d||O;d=d.colorImages;return!(p(d)&&p(d[b])&&p(d[b][c])&&p(d[b][c].main))||1>a.map(d[b][c].main,function(a,b){return b}).length?-1:d[b][c]}function M(a,b,c,d){d.parent().css("z-index",2);0!==c&&0!==b&&(b/=c,a>b?d.css("width",b/a*100+"%"):d.css("height",a/b*100+"%"))}function K(a){return a.tabbedImmersiveViewTreatment&&"C"!==a.tabbedImmersiveViewTreatment}function E(b,c){var d;if(d=
b.useIV)d=b.colorImages&&b.colorImages[c]&&0<b.colorImages[c].length?!0:!1;l.isEnabled&&(l.IVApplicaple=d,h.logImmersiveViewApplicability(a,l));return d}var w,N,O=a.extend(!0,{},f,g),Q={};return{isDefined:p,isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:C,getMaxHeightOfMainImage:W,getMaxWidthOfMainImage:y,getMaxDimensionsOfMainImage:function(a,b,c){var d=W(a,b,c);b=y(a,b,c);a=C(a);c=b/a;b=Math.min(b,d*a);d=Math.min(d,c);return[d,b]},getContainerHeight:function(a,b,c){var d=a.get(0);
a=0;if(p(d)){a=d.offsetWidth/b;a=Math.min(a,c);var e;b=O.mainImageHeightPartitions;c=O.mainImageMaxSizes;if(p(c)&&p(b)){for(var f=0,g=n.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=0;d<b.length;d++)g>b[d]&&(f=d+1);c.length>=f&&(e=c[f])}p(e)&&(a=Math.min(e[1],a))}return a},getColorFromState:function(b,c){if(b){c=c||O;var d="";a.each(c.visualDimensions,function(a,c){b[c]&&(d+=" "+b[c])});return d&&d.substring(1)}},createThumbnail:function(a,c,d,e){var f=d.find(".template").clone().removeClass("template").addClass("item"),
g=document.createElement("img");g.src=c;f.find(".placeHolder").replaceWith(g);(c=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===c&&f.addClass("heroImageThumbnail");p(e)&&f.addClass(e);b.declarative.create(f,"thumb-action",a);d.append(f)},selectGivenThumbnail:function(a,b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(b,f,g,k,l,
h,m,r){var n=a.extend({},g.foresterMetadataParams);null!==k&&(n.method+="."+k);var p=[];f.disabledViewIds&&(p=f.disabledViewIds);return c.embed({parentElement:b[0],streamingUrls:f.url,contentId:f.mediaObjectId,contentMinAge:Number(f.minimumAge||"")||0,contentTitle:f.title,swfUrl:g.swfUrl,foresterMetadataParams:n,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:f.slateUrl,postMediaSlate:f.slateUrl},videoAds:g.videoAds,bindings:{play:function(){"ImmersiveView"===k?
w||(w=!0,e.postCountMetric("dppc_chromefulVideoPlayedIV")):N||(N=!0,e.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:f.durationSeconds-1,type:"position",callback:function(a,b,c){l&&(x(0,h,r),F(m))}}],disabledViewIds:p})},loadMediaIntoAiry:function(a,b,c){a&&a.getMediaSourceInfo()!==b.url&&a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}})},
showUnavailable:function(b){b&&(a("#imageBlock .unvailableVariation").html(b),a("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){a("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:x,toggleVideoCaption:F,selectThumbnail:t,spinner:function(b,c){var d=a("#imageBlock .a-spinner").parent();0===d.length&&(d=a("<div></div>").append(a("<span></span>").addClass("a-spinner").addClass("a-spinner-medium")),b.append(d),d.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)",
"-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));c?d.show():d.hide();return d},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:A,getIndexForVariant:H,getImageHash:G,lazyLoadingRequired:function(a,b,c){b=Math.max(H(a.color,b.getCurrentItem().variant,c),0);b=-1!==G(a.color,b,c);a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;
a=!a||"success"!==A(a);return!c.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:M,repositionVideoBanner:function(a,b,c,d){setTimeout(function(){var c=a.width()/a.height();M(c,16,9,b)},d||0)},productReelExperimentEnabled:K,productReelDarkIngressEnabled:function(a){return K(a)&&"T2"===a.tabbedImmersiveViewTreatment},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?
b.videos.length:0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!p(c.colorToVideo))return-1;a=c.colorToVideo[a]}else a=c.videos;return p(a)&&p(a[b])&&p(a[b].url)?a[b]:-1},isImmersiveViewEnabled:E,playVideoInImmersiveView:function(a,b){return E(a,b)&&K(a)}}});p.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils","postMetric").register("ImageBlockHeroImageView",function(b,a,c,e,f){function g(b,f,g,k){if(!c.isjQueryObjDefined(b.find(".a-button-selected"))){var l=F.getCurrentItem();
if(!k||"chromeless-video"!==l.type||!x.autoplayVideo){k=0;if("hero-image"===l.type){k=h(l.color,l.variant);if(-1===k)return;k=-1!==k?k:0}var m=f+k;m>=g&&(k=0,m=f);f=e.getHeroImageHash(x,l.color,k);-1!==f&&(t.dispatch("updateModel",{data:{index:k,thumbnailIndex:m,variant:f.variant,type:"hero-image"}}),f=b.find(".item").get(m),c.selectGivenThumbnail(a(f),b))}}}function l(b,e,f){if("hero-video"===F.getCurrentItem().type)return b;e=x.heroImage&&x.heroImage[e];var k=b;c.isDefined(e)&&(a.each(e,function(a,
e){b<x.maxAlts&&(c.createThumbnail({type:"hero-image",index:a,thumbnailIndex:b,variant:e.variant},e.thumb,A,"imageThumbnail"),b++)}),g(A,k,b,f));return b}function h(b,e){var f=x.heroImage;if(1>f.length||!c.isDefined(f[b])||!c.isDefined(e))return-1;var g=-1;a.each(f[b],function(a,b){b.variant===e&&(g=a)});return g}function n(){if(H.length&&x.repositionHeroImage){var a=e.getHeroDimParams(x,F.getCurrentItem()),b;c.isDefined(a)&&(b=c.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+a.yPos+"px ",
H.css({"background-position":b,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}function p(a,b,f,g){if(H.length&&a&&b){if("function"===typeof f||g){var k=new Image;k.onload=g?function(){H.css("background-image",'url("'+a+'")')}:f;k.src=a}f=b[1];var k=b[0],l;g||H.css({"background-image":'url("'+a+'")'});x.repositionHeroImage&&(b=e.getHeroDimParams(x,F.getCurrentItem(),b),c.isDefined(b)&&(f=b.width,k=b.height,l=c.isDefined(b.xPos)?
b.xPos+"px "+b.yPos+"px ":"center "+b.yPos+"px "));H.css({"background-position":l,"background-size":f+"px "+k+"px ","max-width":f+"px ","min-height":k+"px ",filter:"","-ms-filter":""})}}function u(b,c,d,f){b=e.getHeroImageHash(x,b,c);if(-1===b)return-1;c=a.map(b.main,function(a,b){return b})[0];p(c,b.main[c],d,f)}function y(a,b,c){if("hero-image"!==a.type)return-1;var d=h(a.color,F.getCurrentItem().variant),d=-1!==d?d:0;if(-1===e.getHeroImageHash(x,a.color,d))return-1;var f=F.getCurrentItem();a.thumbnailIndex=
f.thumbnailIndex;a.type=f.type;a.variant=f.variant;a.index=d;W(a,b,c)}function W(a,c,d){var f=e.getHeroImageHash(x,a.color,a.index),g;g=a&&G&&b.equals(a,G)?!0:!1;G||(G=a);if(!g&&a||c)u(a.color,a.index,c,d),G=a;H.removeClass("hide-background");b.trigger("dp:image-block:update",f)}var C,x,F,t,A,H,G={};return function(b,e,f,g){C=this;x=b;F=e;t=g;x.heroImage[x.landingAsinColor]=x.heroImage[x.defaultColor];C.render=function(b,c,d,e,f,g,k){A=e;H=a("#heroImage");b=l(c,b,g);y(F.getCurrentItem(),k,g);return b};
C.update=function(a){var b=a.data;"ingress"!==b.type&&H.addClass("hide-background");"swatchHover"===a.type?a.captured||(b.type=F.getCurrentItem().type,-1!==y(b)&&(a.captured=!0)):"hero-image"===b.type&&(W(b),"click"!==a.type&&x.usePeekHover||c.selectGivenThumbnail(a.$declarativeParent,A))};t.register("resize",n)}});p.when("A","jQuery","imageBlockUtils","postMetric","ImageBlockAltImageView").register("ImageBlockAltImageIngressView",function(b,a,c,e,f){var g,l,h,n;return function(a,e,f,
k){g=this;l=a;h=k;g.render=function(a,e,f,k,h,r,p){n=k;g=this;f=l.maxAlts;k=e;h=l.colorImages[a]?l.colorImages[a].length:0;h+=c.getVideosCount(a,l);a=l.heroImage[a];r=0;a&&(r=a.length);a=h+r;a>f&&(f=a-f,a=n.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),f+="+",k={type:"ingress",index:0,thumbnailIndex:e,variant:""},a.find("#altIngressText").append(f),b.declarative.create(a,"thumb-action",k),n.append(a),k=e++);return k};g.update=function(a){"ingress"===
a.data.type&&"click"===a.type&&h.dispatch("imageClick",a)}}});p.when("A","jQuery","imageBlockUtils").register("ImageBlockState",function(b,a,c){return function(a,b,f){this.getImageHash=function(b){var k=f.getCurrentItem();b=c.getIndexForVariant(k.color,b||"MAIN",a);return c.getImageHash(k.color,b,a)};this.onImageUpdateForTwister=function(a){b.register("updateSelection",function(b){"swatchClick"===b.type&&"function"===typeof a&&a()})}}});p.when("A","jQuery","imageBlockUtils").register("ImageBlockHeroUtils",
function(b,a,c){function e(a,b){var c;if(b.repositionHeroImage){c=a[1];var d=a[0];if(768>=(n.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))c*=.7,d*=.7;else{var e=((n.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,e=Math.max(Math.min(e,1),0);c*=.7+.3*e;d*=.7+.3*e}c=[c,d]}return c}function f(a,b,e){var g;if(e.repositionHeroImage){var k=n.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;e=e.heroFocalPoint;
if(c.isDefined(e)){g=Math.max((k-Math.min(1500,a))/2,0);var l=Math.max((k-a)/2,0);g-=l;k=Math.max(Math.min(k,1500),1024);g=g+(k-420-23)/2-a/b[1]*e}}return g}function g(b,e,f){b=b.heroImage;return!(c.isDefined(b)&&c.isDefined(b[e])&&c.isDefined(b[e][f])&&c.isDefined(b[e][f].main))||1>a.map(b[e][f].main,function(a,b){return b}).length?-1:b[e][f]}return{getHeroImageHash:g,getHeroDimParams:function(b,l,h){if(b.repositionHeroImage){if(!c.isDefined(h)){h=g(b,l.color,l.index);if(-1===h)return;l=a.map(h.main,
function(a,b){return b})[0];h=h.main[l]}l=e(h,b);b=f(l[0],h,b);return{height:l[1],width:l[0],xPos:b,yPos:75}}}}});p.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(b,a,c,e,f,g,l){function h(a,c){var d=b.copy(a);if(l.isDefined(a)&&a.length>c){try{for(var e=-1,f=0;f<a.length;f++){var g=a.charAt(f);if(" "===g||"."===g||"?"===g||";"===g||","===g||":"===g)e=f;if(f===c-4){d=a.substring(0,-1===e?f:e);break}}}catch(k){d=
a.substring(0,c-3)}d+="..."}return d}function p(a,b){var c=a.lastIndexOf(".");return a="_"===a.charAt(c-1)?a.substring(0,c-1)+b+a.substring(c):a.substring(0,c)+"."+b+a.substring(c)}return{getDimension:function(a,b){var c=parseInt(a.css(b),10);return isNaN(c)?0:c},attachTabSelectHandler:function(a,c){b.on("dp:ivTabs:"+a+":select",c)},attachTabDeselectHandler:function(a,c){b.on("dp:ivTabs:"+a+":deselect",c)},attachImmersiveViewResizeHandler:function(a){b.on("dp:image-block:immersive-view:resize",a)},
attachImmersiveViewResetHandler:function(a){b.on("a:popover:afterHide:immersiveView",a)},hideTabHeading:function(b){a("#"+b).hide()},unhideTabHeading:function(b){a("#"+b).show()},addStyleCodeToURL:p,getResizedThumbnailURL:function(a,b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var c="_AA50_";b&&(c+="FMpng_RI_");return p(a,c)},populateVariationSelection:function(b){if(l.isDefined(n.DetailPage)&&
l.isDefined(n.DetailPage.StateController)){b.empty();var c=n.DetailPage.StateController.getState(),d=c.variation_label_order,e;for(e in d)if(d.hasOwnProperty(e)){var f=d[e],g=c.selected_variations[f],f=c.variation_display_labels[f];g&&a("<div/>").addClass("ivVariations").text(f+":"+g).appendTo(b)}}},populateTitle:function(a,b,c){a.attr("title",c.title);a.text(h(c.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},100,b)}}});
p.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(b,a,c,e,f,g,l,h){function n(){var a=E.getCurrentItem().color;O=K.colorImages[a];N=K.heroImage[a];Q=B=0;f.isDefined(N)&&(Q=N.length);f.isDefined(O)&&(B=O.length)}function p(a){return a.hiRes||a.large||a.main[a.main.length-1]}function u(){var a=w.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");
d.removeAttr("style");var e=d.width(),f=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(f=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,f=0===f?1:f,g=Math.min(b/e,c/f),k=f*g,l=e*g;1>g?(S?a.css("cursor","url('"+K.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),L=!0):L=!1;e=Math.min(l,e);f=Math.min(k-20,f);d.css({"margin-top":(c-f)/2,"margin-left":(b-e)/2,height:f,width:e});
a.css("visibility","visible");P=!1}function y(a){var b=w.find("#ivLargeImage");b.css("visibility","hidden");b.empty();h.animateStageIn(b);b.append(a);u()}function W(a){w.find("#ivLargeImage").css("display","none");w.find("#ivLargeImage").css("display","block");var b;"hero-image"===a?f.isDefined(N)&&(b=p(N[J.index])):f.isDefined(O)&&(b=p(O[J.index]));if(f.isDefined(b)){w.find(".fullscreen").remove();var c=e("<img>").attr("src",b).addClass("fullscreen"),d=w.find("#ivLargeImage");h.animateStageOut(d,
function(){c.load(function(){y(c)});if(c[0].complete)y(c);else{d.empty();var a=(d.height()-104)/2,b=(d.width()-80)/2;e("<img>").attr("src",K.staticImages.spinner).css({position:"relative",top:a+"px",left:b+"px"}).appendTo(d)}})}}function C(a){w.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?J.type="hero-image":J.type="image";J.index=a.attr("id").split("_")[1];W(J.type);l.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(J.index,10)+1)+"_"+(Q+B))}function x(){w.delegate(".ivThumb",
"click",function(){var a=e(this);C(a)})}function F(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function t(a){var b=T.top-(a.pageY-Y[1])*ba;a=F(T.left-(a.pageX-Y[0])*ba,X.left);b=F(b,X.top);w.find(".fullscreen").css({left:a,top:b})}function A(){w.delegate("#ivLargeImage","click",function(a){if(P)u();else if(L){w.find(".fullscreen").removeAttr("style");if(L){var b=w.find("#ivLargeImage"),c=b.find(".fullscreen");S?b.css("cursor","url('"+K.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),
b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));P=!0;var d=w.find("#ivLargeImage");X.left=d.width()-c.width();X.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;Y=[b.offset().left+e,b.offset().top+d];T.top=d-c.height()/2;T.left=e-c.width()/2;c.css({position:"relative",left:T.left,top:T.top});ba=Math.max(c.height()/b.height(),c.width()/b.width())}t(a);l.postCountMetric("dpcc_iv_largeImageCLick")}});w.delegate("#ivLargeImage","mousemove",function(a){P&&t(a)})}function H(){w.find("#ivLargeImage").empty()}
function G(a){if(D){w=e("#ivMain");n();J=E.getCurrentItem();h.populateTitle(w.find("#ivTitle"),160,K);h.populateVariationSelection(w.find("#ivVariationSelection"));a=w.find("#ivThumbs");a.find(".ivRow").not(".placeholder").remove();for(var b=Q+B,c=0,d=0;c<b;)for(var g=a.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(a),l=0;4>l&&c<b;l++,c++,d++)if(d<Q){var m=N[c].thumb,p=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+
c).appendTo(g);p.find(".ivThumbImage").css("background",'url("'+h.getResizedThumbnailURL(m)+'") center no-repeat')}else d>=Q&&d<B+Q&&(m=O[c-Q].thumb,p=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(c-Q)).appendTo(g),p.find(".ivThumbImage").css("background",'url("'+h.getResizedThumbnailURL(m)+'") center no-repeat'));da();D=!1}a=e("#ivImagesTab").height();w.css("height",a);b=w.find("#ivTitle").outerHeight(!0);c=w.find("#ivVariationSelection").outerHeight(!0);
d=w.find("#ivThumbs");g=h.getDimension(d,"margin-top")+h.getDimension(d,"margin-bottom");d.css("height",a-b-c-g);w.find("#ivLargeImage").css("height",a);a=w.find("#ivStage");b=w[0]&&w[0].getBoundingClientRect&&Math.floor(w[0].getBoundingClientRect().width)||w.width();a.css("width",b-h.getDimension(w,"padding-left")-h.getDimension(w,"padding-right")-w.find("#ivThumbColumn").width()-h.getDimension(a,"margin-left")-h.getDimension(a,"margin-right"));J=E.getCurrentItem();a="hero-image"===J.type?w.find("#ivHeroImage_"+
J.index):"image"===J.type?w.find("#ivImage_"+J.index):f.isDefined(N)?w.find("#ivHeroImage_"+J.index):w.find("#ivImage_"+J.index);f.isjQueryObjDefined(a)||(a=w.find("#ivImage_0"));C(a)}var M,K,E,w,N,O,Q,B,J,S=navigator.userAgent.match(/msie|trident/i),D=!0,P=!1,L=!1,X={},T={},ba,Y,D=!0,da=b.once(function(){x();A();h.attachImmersiveViewResizeHandler(G);h.attachTabDeselectHandler("ivImagesTab",H)});return function(a,b,c,d){M=this;K=a;E=b;M.render=function(a,b,c,d,f,g){D=!0;n();0===Q+B?h.hideTabHeading("ivImagesTabHeading"):
h.unhideTabHeading("ivImagesTabHeading");1===Q+B?e("#ivThumbs").hide():e("#ivThumbs").show()};M.update=function(a){};h.attachTabSelectHandler("ivImagesTab",G)}});p.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils","preLoaderHook","lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(b,a,c,e,f,g,l,h,p,q){function u(){E.delegate(".ivThumb","click",function(){var a=e(this);E.find(".ivThumb").removeClass("selected");
a.addClass("selected");a.hasClass("ivThumbVideo")&&(w.type="chromeful-video",w.index=a.attr("id").split("_")[1])})}function y(){var a=e("#ivVideosTab").height();E.css("height",a);var b=E.find(".vse-video-block");O=a-h.getDimension(E,"padding-top")-h.getDimension(E,"padding-bottom");b.css({"max-height":a,overflow:"hidden"});if(P)E.css({"max-width":Math.floor(1.77*O)});else{var a=E.find(".vse-airy-container"),b=E.find(".vse-ib-metadata"),c=Math.floor(O-h.getDimension(b,"height")),d=Math.floor(1.77*
c);a.css({"max-height":c,"max-width":d});b.css("max-width",d);L&&(a=E.find(".vse-vertical-scroll"),b=h.getDimension(a,"margin-top")+h.getDimension(a,"margin-bottom"),a.css("max-height",O-b))}}function W(){N&&N.pause();N&&N.pause();X=!1;S=!0;J=null}function C(){N&&N.pause()}function x(a){J=a.clickTimeStamp;D&&(q.get(b,"#ivVideoBlock",K,da,ha),E=e("#ivVideoBlock"),M.getCurrentItem(),w=M.getCurrentItem(),T());y();X=!0;D=!1;A()}function F(a){D&&(E=e("#ivVideoBlock"),M.getCurrentItem(),w=M.getCurrentItem(),
T());X&&A();y()}function t(a){N=a.airy;X&&N.play({isAsync:!0})}function A(){if(N&&(N.play({isAsync:!0,eventTimestamp:J||(new Date).getTime()}),l.postCountMetric("dpcc_vse_videoBlock_video_played"),S)){var a=n.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,l.postTimeMetric("dpcc_vse_vitff",a),S=!1)}}var H,G,M,K,E,w,N,O,Q,B,J,S=!0,D=!0,P=!1,L=!1,X=!1,T=b.once(function(){u();h.attachImmersiveViewResizeHandler(F);h.attachTabDeselectHandler("ivVideosTab",C);h.attachImmersiveViewResetHandler(W)}),
ba=function(a,b,c){e("#ivVideoBlockSpinner").addClass("aok-hidden");l.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+b.placement);a=M.getCurrentItem().color;a=f.getVideoHash(a,0,G);N||(N=f.createAiryInstanceForChromeful(e("#ivVideoBlock"),a,G.airyConfig,"ImmersiveView"));P=!0;e("#ivVideoBlock").css({"max-width":1.77*O,margin:"0 auto"});X&&P&&N.play({isAsync:!0})},Y=function(a,b,c){D||q.get(a,"#ivVideoBlock",K,da,ha);e("#ivVideoBlockSpinner").addClass("aok-hidden")},da=function(a,b,c){L=!0;
y();X&&A()},ha=function(a,b,c){l.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(a,c,d,e){H=this;G=a;M=c;H.render=function(a,c,d,e,g,l){a=M.getCurrentItem().color;c=f.getVideoHash(a,0,G);Q=G.colorToAsin[a]&&G.colorToAsin[a].asin;Q=f.isDefined(Q)?Q:G.mediaAsin;B=null!==G.vseVideoDataSourceTreatment&&"T1"===G.vseVideoDataSourceTreatment?"ASIN":"physicalID";D=!0;-1===c?h.hideTabHeading("ivVideosTabHeading"):(h.unhideTabHeading("ivVideosTabHeading"),
K={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:c.marketPlaceID,locale:c.languageCode,product:{contentID:Q,contentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:B,videoURL:c.url,imageURL:c.slateUrl},metadata:{ProductTitle:G.title}},p.get(b,"#ivVideoBlock",K,Y,ba))};H.update=function(a){};h.attachTabSelectHandler("ivVideosTab",x);b.on("vseAiry",t)}});p.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",
function(b,a,c,e,f,g,l,h){function p(a){L.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("iv360Image")&&q()}function q(){L.find("#ivLarge360").css("display","none");U();L.find("#ivLarge360").css("display","block");F();var a=L.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});h.animateStageIn(a)},200);W();l.postCountMetric("dppc_click360");aa=Date.now()}function U(){0<aa&&(y("dppc_duration360",Date.now()-aa),aa=0)}function y(a,b){n.ue&&n.ue.count(a,
b)}function W(){if(0<ma){var a=L.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function C(a,b){if(ma<a.length){var c=e("<img />").css({display:"block",width:6*Y+"px",height:da+"px"});c.hide();b.append(c);c.get(0).onload=function(){b.closest(document.documentElement).length&&(ma++,1===ma&&(W(),0<aa&&y("dppc_loadTime360",Date.now()-aa)),0<fa&&y("dppc_perSpriteloadTime360",Date.now()-fa),L.find("#iv360Spinner").hide(),c.show(),pa=5*T.imageLocations[Math.floor(wa/T.imageLocations[0].length)][wa%
T.imageLocations[0].length],C(a,b))};c.attr("src",a[ma].replace(/(\._SP)\d+(,)\d+/,"$1"+ka+"$2"+ha));fa=Date.now()}}function x(a){if(f.isDefined(T.spriteWidthSizes)&&0<T.spriteWidthSizes.length){var b=T.spriteWidthSizes,c=b.length,d=b[0],e=b[c-1];if(a<=d)return d;if(a>e)return e;for(d=0;d<c;d++)if(a>b[d]&&a<=b[d+1])return b[d+1]}else return a}function F(){var a=L.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("<div id='image-360-sprites'></div>"),a.css({"margin-left":0,"margin-top":0,
width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),e("<img>").attr("src",D.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),ta=!0,t())}function t(){if(f.isDefined(T.spriteURLs)&&f.isDefined(L)&&ta&&!ia){var a=L.find("#ivLarge360"),b=e("<div>").addClass("iv360Hint").css({position:"absolute",
width:"100%",bottom:0,opacity:0,display:"block"});f.isDefined(T.staticImages.hint360)&&e("<img>").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",T.staticImages.hint360).appendTo(b);e("<div>").css({"text-align":"center"}).text(D.staticStrings.dragToSpin).appendTo(b);b.appendTo(a);var b=T.imageWidth,c=T.imageHeight,d=a.parent().width(),g=a.parent().height(),l=0,h=0;b/c>d/g?(ka=x(d),ha=Math.round(c/b*ka),Y=Math.ceil(d),da=Math.ceil(ha/ka*d),h=(g-da)/2):(ha=x(g),ka=Math.round(b/
c*ha),da=Math.ceil(g),Y=Math.ceil(ka/ha*g),l=(d-Y)/2);a.css({"margin-left":l,"margin-top":h,width:Y+"px",height:da+"px",overflow:"hidden",position:"relative"});a.children("#image-360-sprites").css("width",6*Y+"px");C(T.spriteURLs,L.find("#image-360-sprites"),0);b=L.find("#ivLarge360");b.bind("mousedown",M);b.bind("touchstart",A);b.bind("touchmove",H);b.bind("touchend",G);e(document).bind("mousemove",K);e(document).bind("mouseup",E);f.isDefined(D.staticImages.grab)&&a.css("cursor","url('"+D.staticImages.grab+
"'), auto");ia=!0}}function A(a){la=!0;ea=a.originalEvent.targetTouches[0].clientX}function H(a){la&&(w(a.originalEvent.targetTouches[0].clientX-ea),ea=a.originalEvent.targetTouches[0].clientX)}function G(a){la&&(la=!1)}function M(a){R=!0;ra=a.originalEvent.clientX;f.isDefined(D.staticImages.grabbing)&&(a=L.find("#ivLarge360"),a.css("cursor","url('"+D.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+D.staticImages.grabbing+"'), auto"));return!1}function K(a){R&&
(w(a.originalEvent.clientX-ra),ra=a.originalEvent.clientX)}function E(a){R&&(R=!1,f.isDefined(D.staticImages.grab)&&(a=L.find("#ivLarge360"),a.css("cursor","url('"+D.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function w(a){for(a=pa-=a/Y*180;0>a;)a+=360;for(;360<a;)a-=360;pa=a;var b;a=360;for(var c=0;c<ma;c++)for(var d=0;d<T.imageLocations[c].length;d++){var e=Math.abs(pa-5*T.imageLocations[c][d]);e<a&&(a=e,b=c*T.imageLocations[0].length+d)}b!==wa&&(a=Math.floor(b/
T.imageLocations[0].length),a!==Math.floor(wa/T.imageLocations[0].length)&&(f.isDefined(V)||(V=document.createElement("canvas").getContext("2d")),c=L.find("#image-360-sprites").children(),V.drawImage(c[a],0,0)),a=L.find(".iv360Hint").not(".iv360HintFaded"),f.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));wa=b;a=b%T.imageLocations[0].length*-1*Y;b=-1*Math.floor(b/T.imageLocations[0].length)*da;c=L.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform",
"translate3d("+a+"px, "+b+"px, 0)");c.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function N(){L.delegate(".ivThumb","click",function(){var a=e(this);p(a)})}function O(){U()}function Q(a){if(v){L=e("#ivMain360");a=P.getCurrentItem().color;ba=J()&&D.spin360ColorEnabled[a];T=J()?D.spin360ColorData[a]:u;P.getCurrentItem();ba&&(X=1);h.populateTitle(L.find("#ivTitle360"),160,D);h.populateVariationSelection(L.find("#ivVariationSelection360"));a=L.find("#ivThumbs360");a.find(".ivRow").not(".placeholder").remove();
for(var b=X,c=0,d=0;c<b;)for(var g=a.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(a),l=0;3>l&&c<b;l++,c++,d++)d<X&&a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(g).find(".ivThumbImage").css("background",'url("'+(f.isDefined(D.staticImages.icon360)?h.getResizedThumbnailURL(D.staticImages.icon360,!0):"")+'") center no-repeat');L.find("#ivLarge360").empty();ma=0;v=ia=ta=!1;oa();v=!1}a=e("#iv360Tab").height();
L.css("height",a);b=L.find("#ivTitle360").outerHeight(!0);c=L.find("#ivVariationSelection360").outerHeight(!0);d=L.find("#ivThumbs360");g=h.getDimension(d,"margin-top")+h.getDimension(d,"margin-bottom");d.css("height",a-b-c-g);a=L.find("#ivStage360");b=L[0]&&L[0].getBoundingClientRect&&Math.floor(L[0].getBoundingClientRect().width)||L.width();a.css("width",b-h.getDimension(L,"padding-left")-h.getDimension(L,"padding-right")-L.find("#ivThumbColumn360").width()-h.getDimension(a,"margin-left")-h.getDimension(a,
"margin-right"));P.getCurrentItem();a=L.find("#iv360");f.isDefined(a)&&0!==L.height()&&(f.isjQueryObjDefined(a)||(a=L.find("#ivImage_0")),p(a))}function B(a){var b=D.colorToAsin[a],c={},d=500;if(b&&b.asin){c.params={asin:b.asin};var e="360"+b.asin,h=Date.now();c.success=function(b){y("dppc_asyncRequestTime360",Date.now()-h);b&&f.isDefined(b.spin360.spin360Model)?(f.ajaxState(e,"success"),D.spin360ColorData[a]=b.spin360.spin360Model,a===P.getCurrentItem().color&&(T=D.spin360ColorData[a],t())):c.error()};
c.error=function(){l.postCountMetric("dppc_asyncFailed360");y("dppc_asyncRequestTime360",Date.now()-h);d*=2;16E3>=d?setTimeout(function(){h=Date.now();g.load("/gp/product/features/apparel-main-image/360.html",c)},d):f.ajaxState(e,"fail")};f.ajaxState(e)&&"fail"!==f.ajaxState(e)||(g.load("/gp/product/features/apparel-main-image/360.html",c),f.ajaxState(e,"sent"))}}function J(){return f.isDefined(D.spin360ConfigEnabled)&&D.spin360ConfigEnabled}var S,D,P,L,X,T,ba,Y,da,ha,ka,ra,ea,ta=!1,ia=!1,pa=0,wa=
0,aa=0,fa=0,R=!1,la=!1,ma=0,V,v=!0,oa=b.once(function(){N();h.attachImmersiveViewResizeHandler(Q);h.attachTabDeselectHandler("iv360Tab",O)});return function(a,c,d,g){S=this;D=a;P=c;J()&&(D.spin360ColorData[D.landingAsinColor]=D.spin360ColorData[D.defaultColor],D.spin360ColorEnabled[D.landingAsinColor]=D.spin360ColorEnabled[D.defaultColor]);f.isDefined(D.staticImages.icon360)&&e("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",h.addStyleCodeToURL(D.staticImages.icon360,
"_FMpng_RI_"));S.render=function(a,c,d,g,n,p){v=!0;J()&&D.spin360ColorEnabled[a]?(f.isDefined(D.spin360ColorData[a])||(D.spin360ColorData[a]={},B(a)),e("#ivThumbs360").hide(),h.unhideTabHeading("iv360TabHeading")):h.hideTabHeading("iv360TabHeading");f.isImmersiveViewEnabled(D,P.getCurrentItem().color)&&J()&&D.spin360ColorEnabled[a]&&(c===D.maxAlts&&(a=g.find(".item.imageThumbnail"),d=g.find(".item.videoThumbnail"),f.isDefined(d)&&1<d.length?d.last().remove():a.last().remove(),c--),a=g.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),
b.declarative.create(a,"button-360-click"),g.append(a),c++,l.postCountMetric("dppc_display360"));return c};S.update=function(a){};h.attachTabSelectHandler("iv360Tab",Q)}});var h=n.location.host,c={dub:"https://www.amazon.co.uk/vap/ew/",pdx:"https://www.amazon.co.jp/vap/ew/"},f=h.split(".")[1],l=-1===h.indexOf(".proxy.amazon.com")?"/vap/ew/":c[f]!==u?c[f]:"https://www.amazon.com/vap/ew/";p.when("postMetric").register("preLoaderHook",function(b){function a(c,e){var f=c.A,g=c.block,h=c.request,
r=c.handleFailure,n=c.handleSuccess,p=e,u=f.$;e--;var y=p-e-1,W=(new Date).getTime();f.ajax(l+"componentbuilder",{params:h,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:h.timeout||4E3,withCredentials:!0,success:function(a){var c=(new Date).getTime()-W;b.postTimeMetric("vse_preLoaderHook:success:",c);b.postCountMetric("vse_preLoaderHook:success:"+h.page+":"+h.placement+":"+y);u(g).html(a);n(f,h,a)},error:function(g){(0===g.http.status||500<=g.http.status&&
599>=g.http.status)&&0<e?(b.postCountMetric("vse_preLoaderHook:error:"+h.page+":"+h.placement+":"+y),a(c,e)):r(f,h,g)}})}return{get:function(b,c,f,g,l){a({A:b,block:c,request:f,handleFailure:l,handleSuccess:g},3)}}});p.when("postMetric").register("lazyLoaderHook",function(b){function a(c,e,f){var g=c.A,h=c.context,r=c.handleFailure,n=c.handleSuccess;e.attr("data-configuration");var p=atob(e.attr("data-configuration")),u=JSON.parse(p),p=f,y={pageContext:h,configuration:u},W=(new Date).getTime();f--;
var C=p-f-1;g.ajax(l+"subcomponent/"+u.type,{params:y,paramsFormat:"json",method:"post",contentType:"application/json",timeout:h.timeout||4E3,withCredentials:!0,success:function(a){var c=(new Date).getTime()-W;b.postTimeMetric("vse_lazyLoaderHook:success:",c);b.postCountMetric("vse_lazyLoaderHook:success:"+h.page+":"+h.placement+":"+u.type+":"+C);e.html(a);n(g,y,a)},error:function(l){(0===l.http.status||500<=l.http.status&&599>=l.http.status)&&0<f?(b.postCountMetric("vse_lazyLoaderHook:error:"+h.page+
":"+h.placement+":"+u.type+":"+C),a(c,e,f)):r(g,y,l)}})}return{get:function(b,c,f,g,l){var h=b.$;h(c+" div[data-configuration]").each(function(){a({A:b,context:f,handleFailure:l,handleSuccess:g},h(this),3)})}}})});